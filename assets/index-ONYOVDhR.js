var H=Object.defineProperty;var L=(l,t,e)=>t in l?H(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var M=(l,t,e)=>L(l,typeof t!="symbol"?t+"":t,e);import{u as k}from"./useCustomRouter-CiU2rkZM.js";import{T as G,L as Q}from"./index-Dm8pkpH6.js";import{_ as q,a as I,o as n,c as w,b as C,f as F,d as g,u as a,e as x,C as $,p,t as E,D as O,v as b,A as z,w as Y,F as U,j as W,M as J,r as V,k as K,B as X,G as Z,J as ee,K as te}from"./index-BGi8GpGv.js";import{a as T}from"./index-CJtyaUy2.js";import{u as re,G as se}from"./index-DQhdp3Mo.js";import{P as le}from"./index-CBHngC_A.js";import{c as ae,D as oe}from"./metaHelper-B8_iLp7n.js";import{u as ne,C as B,a as ie}from"./Content-CKsiGma2.js";import N from"./TextView-qcU6xMhp.js";import"./useForm-D-1CqejB.js";const ue={class:"title-button-group"},ce={__name:"Title",setup(l){const{addQuery:t}=k();return(e,r)=>{const s=I("Button");return n(),w(a(G),{title:"문의하기"},{rightArea:C(()=>[F("div",ue,[g(s,{outlined:"",width:74,size:"x-small",title:"문의하기",onClick:r[0]||(r[0]=o=>a(t)({view:"add"}))})])]),_:1})}}},de=q(ce,[["__scopeId","data-v-30ff2b48"]]),me={class:"toolbar-wrapper"},pe={class:"right-area"},fe={__name:"Toolbar",setup(l){return(t,e)=>(n(),x("div",me,[e[0]||(e[0]=F("div",{class:"left-area"},null,-1)),F("div",pe,[g(a(le))])]))}},_e=q(fe,[["__scopeId","data-v-489f60ea"]]),ve={__name:"Alert",props:{modelValue:{},modelModifiers:{},type:{},typeModifiers:{}},emits:["update:modelValue","update:type"],setup(l){const t=$(l,"modelValue"),e=$(l,"type"),r=p(()=>e.value==="refresh"?"새로고침을 진행하시겠습니까?":e.value==="refresh_complete"?"DID 새로고침 완료":e.value==="restart"?"재시작을 진행하시겠습니까?":e.value==="restart_complete"?"DID 재시작 완료":e.value==="update"?"업데이트를 진행하시겠습니까?":e.value==="update_complete"?"DID 업데이트 완료":e.value==="on"?"기기 사용을 ON 하시겠습니까?":e.value==="on_complete"?"기기 사용 ON 완료":e.value==="off"?"기기 사용을 OFF 하시겠습니까?":e.value==="off_complete"?"기기 사용 OFF 완료":e.value==="finish"?"기기를 종료하시겠습니까?":e.value==="finish_complete"?"기기 종료 완료":""),s=p(()=>e.value==="refresh"?`새로고침을 할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="refresh_complete"?"DID 새로고침이 완료됐습니다.":e.value==="restart"?`재시작을 할 경우,
기기에 콘텐츠 노출이 멈추게 됩니다.`:e.value==="restart_complete"?`DID 재시작이 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="update"?`업데이트를 진행할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="update_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="on"?`기기 사용을 ON 하게 되면,
기기가 활성화됩니다.`:e.value==="on_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="off"?`기기 사용을 OFF 하게 되면,
기기 화면이 대기 상태로 전환되게 됩니다.`:e.value==="off_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="finish"?`기기 사용을 OFF 하게 되면,
기기가 꺼지게 됩니다.`:e.value==="finish_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:""),o=p(()=>{var i;return!((i=e.value)!=null&&i.endsWith("_complete"))}),u=p(()=>{var i;return(i=e.value)==null?void 0:i.endsWith("_complete")});function f(){e.value=`${e.value}_complete`}return(i,_)=>{const c=I("Alert",!0);return n(),w(c,{modelValue:t.value,"onUpdate:modelValue":_[0]||(_[0]=m=>t.value=m),title:r.value,message:s.value,showCancel:o.value,confirmClickClose:u.value,"onClick:confirm":f},null,8,["modelValue","title","message","showCancel","confirmClickClose"])}}},he={__name:"Status",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(l){const t=l,e=p(()=>{var r;return((r=t.column.items.find(s=>s.value===t.item[t.column.key]))==null?void 0:r.title)||"-"});return(r,s)=>(n(),x("div",null,E(e.value),1))}},ge={__name:"InquiryType",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(l){const t=l,e=p(()=>{var r;return((r=t.column.items.find(s=>s.value===t.item[t.column.key]))==null?void 0:r.title)||"-"});return(r,s)=>(n(),x("div",null,E(e.value),1))}},ye={idx:{column:{title:"NO",type:"text"}},inquiryType:{column:{title:"문의 유형",type:"text"},form:{row:1,required:!0,autoFocus:!0,component:"dropdown",class:"w-318",label:"문의 유형",placeholder:"문의 유형을 선택해 주세요.",errorMessages:{error:"",require:""}},common:{items:[{title:"결제",value:"PAYMENT"},{title:"이용방법",value:"USAGE"},{title:"취소/환불",value:"REFUND"},{title:"대행사/랩사 등록",value:"AGENCY_LAB_REGISTRATION"},{title:"서비스 문의",value:"SERVICE"},{title:"제휴 문의",value:"PARTNERSHIP"}]}},title:{column:{title:"제목",type:"text"},form:{row:2,required:!0,component:"input",label:"제목",placeholder:"제목을 입력해 주세요.",errorMessages:{error:"",require:""}}},question:{form:{row:3,required:!0,component:"editor",label:"문의 내용",placeholder:"내용을 입력해 주세요.",errorMessages:{error:"",require:""}}},threads:{form:{row:4,component:"custom",label:"",placeholder:"",errorMessages:{error:"",require:""}}},addQuestion:{form:{row:5,required:!0,autoFocus:!0,component:"editor",label:"추가 문의 내용",placeholder:"내용을 입력해 주세요.",errorMessages:{error:"",require:""}}},status:{column:{title:"처리 상태",type:"text"},common:{items:[{title:"Not Yet",value:"PENDING"},{title:"Add Ask",value:"PENDING_THREAD"},{title:"Finish",value:"COMPLETED"}]}},createdAt:{column:{title:"등록일시",type:"date",format:"YYYY-MM-DD HH:mm"}},answerAt:{column:{title:"답변일시",type:"date",format:"YYYY-MM-DD HH:mm"}},detailView:{column:{title:"답변보기",type:"link"}}},we=["idx","inquiryType","title","status","createdAt","answerAt","detailView"],De=["inquiryType","title","question","threads","addQuestion"],Ce=ae(ye,we,De);class A extends oe{constructor(t){super(t),this.detailView="답변보기"}toRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>["scheduledAt"].includes(e)?{...t,[e]:O(this[e]).valueOf()}:{...t,[e]:this[e]},{})}toPutRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>["scheduledAt"].includes(e)?{...t,[e]:O(this[e]).valueOf()}:{...t,[e]:this[e]},{})}}M(A,"metaData",Ce);const be={__name:"index",setup(l){const{page:t,size:e,totalPage:r,loading:s,items:o,addQuery:u}=re(i),f=A.toColumnHeaders();async function i(){var h;const c={page:t.value,size:e.value};s.value=!0,o.value.length=0;const m=await T("inquiry").getPage(c),{result:y,body:v}=m||{};y.httpStatus===200&&(s.value=!1,(h=v==null?void 0:v.data)==null||h.forEach(d=>o.value.push(new A(d))),r.value=(v==null?void 0:v.totalPage)||0)}async function _({item:c,column:m,newValue:y}){if(m.type==="link")return u({view:"detail",id:c.idx})}return(c,m)=>(n(),w(a(se),{page:a(t),items:a(o),loading:a(s),totalPage:a(r),columnHeaders:a(f),"onClick:cell":_,"onClick:page":m[0]||(m[0]=y=>a(u)({page:y}))},{toolbar:C(()=>[g(_e)]),alert:C(()=>[g(ve)]),inquiryType:C(({item:y,column:v})=>[g(ge,{item:y,column:v},null,8,["item","column"])]),status:C(({item:y,column:v})=>[g(he,{item:y,column:v},null,8,["item","column"])]),_:1},8,["page","items","loading","totalPage","columnHeaders"]))}},xe=q(be,[["__scopeId","data-v-85a1a501"]]),ke={__name:"index",setup(l){return(t,e)=>(n(),w(a(Q),null,{title:C(()=>[g(de)]),content:C(()=>[g(a(xe))]),_:1}))}};function R(l){const t=A.toFormFields(),{values:e,errors:r,getFields:s,validateFields:o}=ne(t),u=l?["question"]:["threads","addQuestion"];return{fields:s(u,l).filter(_=>!_.find(c=>u.includes(c.key))),values:e,errors:r,validateFields:()=>o(u)}}const qe={__name:"Create",setup(l){const{showAlert:t}=b("alert"),{routeList:e}=k(),{fields:r,values:s,errors:o,validateFields:u}=R(),f=p(()=>r.map(_=>_.map(c=>c))),i=b("methods");return i.cancel=()=>z(s)?t("cancel"):e(),i.submit=()=>{if(!u())return t("missing");t("regist",async()=>{var m;const _=new A({...s}),c=await T("inquiry").create(_.toRequestBody());t(((m=c==null?void 0:c.result)==null?void 0:m.httpStatus)===200?"regist_complete":"missing")})},(_,c)=>(n(),w(B,{fields:f.value,values:a(s),errors:a(o)},null,8,["fields","values","errors"]))}},Fe={class:"flex flex-col flex-grow-1"},Ae={__name:"Threads",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(l){const t=$(l,"modelValue"),e=b("footer-props");return Y(t,r=>{const{answer:s}=(r==null?void 0:r.at(-1))||{};e.disabledSubmit=!s},{immediate:!0}),(r,s)=>(n(),x("div",Fe,[(n(!0),x(U,null,W(t.value,(o,u)=>(n(),x("div",{key:u,class:"threads-wrapper"},[g(N,{label:`${u>0?"추가":""} 문의 내용`,"model-value":o.question},null,8,["label","model-value"]),o.answer?(n(),w(N,{key:0,label:"답변 내용",class:"answer","model-value":o.answer},null,8,["model-value"])):J("",!0)]))),128))]))}},Te=q(Ae,[["__scopeId","data-v-b409b610"]]),Ie={__name:"Detail",setup(l){const{showAlert:t}=b("alert"),e=b("footer-props"),r=V(!1);Y(r,h=>{e.submitWidth=h?55:103,e.submitTitle=h?"완료":"추가 문의하기"},{immediate:!0});const{getQuery:s,routeList:o}=k(),{fields:u,values:f,errors:i,validateFields:_}=R(!0),c=p(()=>u.filter(h=>h.find(d=>d.key==="addQuestion"?r==null?void 0:r.value:!0)).map(h=>h.map(d=>d.key==="threads"?{...d}:d.key==="addQuestion"?r.value?{...d}:{}:d.key==="inquiryType"?{...d,required:!1,disabled:!0}:{...d,required:!1,disabled:!0,component:"textView"}))),m=V(!1),y=V({});K(async()=>{var P;m.value=!0;const h=await T("inquiry").getDetail((P=s())==null?void 0:P.id),{result:d,body:D}=h||{};if(d.httpStatus!==200)return;const S=[{question:D.question,answer:D.answer},...(D==null?void 0:D.threads)||[]],j=O(D.scheduledAt).format("YYYY-MM-DD");y.value=X(f,{...D,threads:S,scheduledAt:j}),m.value=!1});const v=b("methods");return v.cancel=()=>Z(y.value,f)?t("cancel"):o(),v.submit=()=>{if(!r.value)return r.value=!0;if(!_())return t("missing");t("regist",async()=>{var D;const{addQuestion:h}=f,d=await T(`inquiry/${s().id}/thread`).create({question:h});((D=d==null?void 0:d.result)==null?void 0:D.httpStatus)===200&&t("regist_complete")})},(h,d)=>(n(),w(B,{isDetail:"",fields:c.value,values:a(f),errors:a(i)},{custom:C(D=>[g(Te,ee(te(D)),null,16)]),_:1},8,["fields","values","errors"]))}},Ve=q(Ie,[["__scopeId","data-v-0225d3cc"]]),$e={class:"flex justify-between align-center"},Oe={class:"button-group"},Pe={__name:"Footer",props:{isDetail:{type:Boolean,default:!1}},setup(l){const t=b("methods"),e=b("footer-props"),r=l,s=p(()=>r.isDetail?e.submitWidth:"55"),o=p(()=>r.isDetail?e.submitTitle:"등록");return(u,f)=>{const i=I("Button");return n(),x("div",$e,[f[0]||(f[0]=F("div",null,null,-1)),F("div",Oe,[g(i,{outlined:"",width:55,title:l.isDetail?"목록":"취소",size:"medium",color:"neutral",onClick:a(t).cancel},null,8,["title","onClick"]),g(i,{size:"medium",color:"primary",width:s.value,title:o.value,disabled:a(e).disabledSubmit,onClick:a(t).submit},null,8,["width","title","disabled","onClick"])])])}}},Me=q(Pe,[["__scopeId","data-v-ace05da7"]]),Ne={__name:"Alert",setup(l){const{alertObj:t}=b("alert"),{routeList:e}=k(),r=p(()=>t.type),s=p(()=>r.value==="regist"?"문의하기를 등록하시겠습니까?":r.value==="regist_complete"?"문의하기 등록 완료":r.value==="cancel"?"문의하기 등록을 취소하시겠습니까?":r.value==="missing"?"잘못된 정보 또는 누락된 정보가 있습니다.":""),o=p(()=>r.value==="regist"?"문의 유형 및 문의 내용을 정확히 기재하셨나요?":r.value==="regist_complete"?"빠른 시간 안에 답변 드리겠습니다.":r.value==="cancel"?`문의하기 등록을 취소할 경우,
입력한 정보가 삭제됩니다.`:r.value==="missing"?"입력한 정보를 다시 한번 확인해주세요.":""),u=p(()=>r.value==="missing"),f=p(()=>["regist","cancel","delete","put","put_cancel"].includes(r.value)),i=p(()=>!["regist","put","delete"].includes(r.value)),_=p(()=>({cancel:e,regist:t["click:confirm"],regist_complete:e,delete:t["click:confirm"],delete_complete:e,put:t["click:confirm"],put_complete:e,put_cancel:e}));return(c,m)=>{const y=I("Alert",!0);return n(),w(y,{modelValue:a(t).show,"onUpdate:modelValue":m[0]||(m[0]=v=>a(t).show=v),title:s.value,error:u.value,message:o.value,showCancel:f.value,confirmClickClose:i.value,"onClick:confirm":_.value[r.value]},null,8,["modelValue","title","error","message","showCancel","confirmClickClose","onClick:confirm"])}}},Ee={__name:"index",setup(l){const{isDetail:t}=k();return(e,r)=>(n(),w(a(ie),{title:a(t)?"답변보기":"문의하기 등록"},{content:C(()=>[a(t)?(n(),w(Ve,{key:0})):(n(),w(qe,{key:1}))]),footer:C(()=>[g(Me,{isDetail:a(t)},null,8,["isDetail"])]),alert:C(()=>[g(Ne)]),_:1},8,["title"]))}},Je={__name:"index",setup(l){const{getQuery:t}=k();return(e,r)=>{var s;return["add","detail"].includes((s=a(t)())==null?void 0:s.view)?(n(),w(a(Ee),{key:0})):(n(),w(a(ke),{key:1}))}}};export{Je as default};
