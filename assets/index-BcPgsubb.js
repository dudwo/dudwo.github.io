var J=Object.defineProperty;var X=(n,t,e)=>t in n?J(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Y=(n,t,e)=>X(n,typeof t!="symbol"?t+"":t,e);import{u as F}from"./useCustomRouter-CiU2rkZM.js";import{T as Z,L as ee}from"./index-Dm8pkpH6.js";import{_ as T,a as x,o as b,c as A,b as y,f as w,d as c,u as s,r as V,w as O,k as U,e as L,s as B,p as C,C as q,D as k,t as j,H as te,E as le,I as z,v as M,A as re,J as oe,K as se,B as R,G as ne,L as ae,M as ie}from"./index-BGi8GpGv.js";import{a as S}from"./index-CJtyaUy2.js";import{u as ue,G as ce}from"./index-DQhdp3Mo.js";import{S as de}from"./SearchIcon-C8b4b_FZ.js";import{P as me}from"./index-CBHngC_A.js";import{c as pe,D as fe}from"./metaHelper-B8_iLp7n.js";import{u as _e,C as H,a as ve}from"./Content-CKsiGma2.js";import{u as he}from"./content-BGkeOCVn.js";import"./useForm-D-1CqejB.js";const be={class:"title-button-group"},ge={__name:"Title",setup(n){const{addQuery:t}=F();return(e,l)=>{const o=x("Button");return b(),A(s(Z),{title:"일반 콘텐츠 관리"},{rightArea:y(()=>[w("div",be,[c(o,{outlined:"",width:87,size:"x-small",title:"콘텐츠 등록",onClick:l[0]||(l[0]=m=>s(t)({view:"add"}))})])]),_:1})}}},ye=T(ge,[["__scopeId","data-v-5e4d8c06"]]),we={class:"grid-header-wrapper"},Ce={class:"left-area"},De={class:"item-wrapper"},Ae={class:"search-field"},xe={class:"item-wrapper"},Me={class:"item-wrapper"},Ie={__name:"Header",setup(n){const{getQuery:t,changeQuery:e}=F(),l=V({}),o=(d,r)=>C({get:()=>l.value[d]||r,set:u=>l.value[d]=u&&u!=="ALL"?String(u).toUpperCase():void 0}),m=o("c_status","ALL"),f=o("s_status","ALL"),g=V("");O(g,d=>l.value.contentName=d||void 0),U(_),O(t,_);function _(){var d;g.value=((d=t())==null?void 0:d.contentName)||void 0,["c_status","s_status","pageSize"].forEach(r=>{const u=t()[r];l.value[r]=u&&u!=="ALL"?u.toUpperCase():void 0})}return(d,r)=>{const u=x("Input"),i=x("Radio"),p=x("RadioGroup"),h=x("Button");return b(),L("div",we,[w("div",Ce,[w("div",De,[r[5]||(r[5]=w("div",null,"콘텐츠",-1)),w("div",Ae,[c(u,{placeholder:"제휴처 명을 검색해 주세요.",modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=a=>g.value=a),"onKeydown:enter":r[1]||(r[1]=a=>s(e)(l.value))},{"prepend-icon":y(()=>[c(de,{class:"mr-2"})]),_:1},8,["modelValue"])])]),w("div",xe,[r[6]||(r[6]=w("div",null,"유형",-1)),c(p,{modelValue:s(m),"onUpdate:modelValue":r[2]||(r[2]=a=>B(m)?m.value=a:null)},{default:y(()=>[c(i,{label:"전체",value:"ALL"}),c(i,{label:"정보",value:"INFORMATION"}),c(i,{label:"엔터",value:"ENTERTAINMENT"})]),_:1},8,["modelValue"])]),w("div",Me,[r[7]||(r[7]=w("div",null,"상태",-1)),c(p,{modelValue:s(f),"onUpdate:modelValue":r[3]||(r[3]=a=>B(f)?f.value=a:null)},{default:y(()=>[c(i,{label:"전체",value:"ALL"}),c(i,{label:"게재",value:"ACTIVE"}),c(i,{label:"중지",value:"INACTIVE"}),c(i,{label:"예약",value:"SCHEDULED"})]),_:1},8,["modelValue"])])]),w("div",null,[c(h,{size:"tiny",title:"적용",onClick:r[4]||(r[4]=a=>s(e)(l.value))})])])}}},ke=T(Ie,[["__scopeId","data-v-791495e8"]]),Ne={class:"toolbar-wrapper"},Fe={class:"right-area"},Ve={__name:"Toolbar",setup(n){return(t,e)=>{const l=x("Button");return b(),L("div",Ne,[e[0]||(e[0]=w("div",{class:"left-area"},null,-1)),w("div",Fe,[c(l,{color:"green",size:"x-small",title:"다운로드"}),c(s(me))])])}}},Se=T(Ve,[["__scopeId","data-v-8f139c3e"]]),Ee={__name:"Alert",props:{modelValue:{},modelModifiers:{},type:{},typeModifiers:{}},emits:["update:modelValue","update:type"],setup(n){const t=q(n,"modelValue"),e=q(n,"type"),l=C(()=>e.value==="refresh"?"새로고침을 진행하시겠습니까?":e.value==="refresh_complete"?"DID 새로고침 완료":e.value==="restart"?"재시작을 진행하시겠습니까?":e.value==="restart_complete"?"DID 재시작 완료":e.value==="update"?"업데이트를 진행하시겠습니까?":e.value==="update_complete"?"DID 업데이트 완료":e.value==="on"?"기기 사용을 ON 하시겠습니까?":e.value==="on_complete"?"기기 사용 ON 완료":e.value==="off"?"기기 사용을 OFF 하시겠습니까?":e.value==="off_complete"?"기기 사용 OFF 완료":e.value==="finish"?"기기를 종료하시겠습니까?":e.value==="finish_complete"?"기기 종료 완료":""),o=C(()=>e.value==="refresh"?`새로고침을 할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="refresh_complete"?"DID 새로고침이 완료됐습니다.":e.value==="restart"?`재시작을 할 경우,
기기에 콘텐츠 노출이 멈추게 됩니다.`:e.value==="restart_complete"?`DID 재시작이 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="update"?`업데이트를 진행할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="update_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="on"?`기기 사용을 ON 하게 되면,
기기가 활성화됩니다.`:e.value==="on_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="off"?`기기 사용을 OFF 하게 되면,
기기 화면이 대기 상태로 전환되게 됩니다.`:e.value==="off_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="finish"?`기기 사용을 OFF 하게 되면,
기기가 꺼지게 됩니다.`:e.value==="finish_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:""),m=C(()=>{var _;return!((_=e.value)!=null&&_.endsWith("_complete"))}),f=C(()=>{var _;return(_=e.value)==null?void 0:_.endsWith("_complete")});function g(){e.value=`${e.value}_complete`}return(_,d)=>{const r=x("Alert",!0);return b(),A(r,{modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=u=>t.value=u),title:l.value,message:o.value,showCancel:m.value,confirmClickClose:f.value,"onClick:confirm":g},null,8,["modelValue","title","message","showCancel","confirmClickClose"])}}},Te={__name:"PublishAt",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(n){const t=n,e=C(()=>{const l=k(t.item.publishStartAt).format("YYYY-MM-DD"),o=k(t.item.publishEndAt).format("YYYY-MM-DD");return`${l} ~ ${o}`});return(l,o)=>(b(),L("div",null,j(e.value),1))}},$e={__name:"ContentType",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(n){const t=n,e=C(()=>{var l;return(l=t.column.items.find(o=>o.value===t.item[t.column.key]))==null?void 0:l.title});return(l,o)=>(b(),L("div",null,j(e.value),1))}},qe={idx:{column:{title:"NO",type:"text"}},name:{column:{title:"콘텐츠 명",type:"link"},form:{row:1,required:!0,autoFocus:!0,component:"input",class:"w-318",label:"콘텐츠 명",placeholder:"콘텐츠 명을 입력해 주세요.",errorMessages:{error:"",require:""}}},contentType:{column:{title:"유형",type:"text"},form:{row:2,required:!0,component:"dropdown",class:"w-318",label:"유형",placeholder:"-",errorMessages:{error:"",require:""}},common:{items:[{title:"정보",value:"INFORMATION"},{title:"엔터",value:"ENTERTAINMENT"}]}},status:{column:{title:"상태",type:"dropdown"},form:{row:2,required:!0,component:"dropdown",class:"w-318",label:"상태",placeholder:"-",errorMessages:{error:"",require:""}},common:{items:[{title:"게재",value:"ACTIVE"},{title:"중지",value:"INACTIVE"},{title:"예약",value:"SCHEDULED"}]}},mediaFileIdx:{form:{row:3,required:!0,component:"custom",label:"콘텐츠 업로드",placeholder:"",errorMessages:{error:"",require:""}}},mediaFileSize:{column:{title:"용량",type:"text"}},mediaLength:{column:{title:"길이",type:"text"}},createdAt:{column:{title:"등록일",type:"date"}},publishAt:{column:{title:"게재일",type:"text"}},publishStartAt:{form:{row:4,required:!0,component:"datePicker",class:"w-318",label:"콘텐츠 게재일",placeholder:"게재일을 선택해 주세요.",errorMessages:{error:"",require:""}}},publishEndAt:{form:{row:4,required:!0,component:"datePicker",class:"w-318",label:"콘텐츠 종료일",placeholder:"종료일을 선택해 주세요.",errorMessages:{error:"",require:""}}},dailyEstimatedViews:{column:{title:"일 예상 노출",type:"number"}},totalViews:{column:{title:"누적 노출",type:"number"}},settled:{column:{title:"정산",type:"dropdown",items:[{title:"완료",value:!0},{title:"미완료",value:!1}]}},supplierName:{column:{title:"공급처",type:"text"},form:{row:5,required:!0,component:"input",class:"w-318",label:"공급처 명",placeholder:"공급처 명을 입력해 주세요.",errorMessages:{error:"",require:""}}},supplierManagerName:{column:{title:"담당자",type:"text"},form:{row:5,required:!0,component:"input",class:"w-318",label:"공급처 담당자 명",placeholder:"공급처 담당자를 입력해 주세요.",errorMessages:{error:"",require:""}}},supplierContact:{column:{title:"담당자 연락처",type:"text"},form:{row:6,required:!0,component:"input",class:"w-318",label:"공급처 담당자 연락처",placeholder:"숫자만 입력해 주세요.",errorMessages:{error:"",require:""}}},supplierEmail:{form:{row:6,required:!0,component:"input",class:"w-318",label:"공급처 담당자 이메일",placeholder:"공급처 담당자 이메일을 입력해 주세요.",errorMessages:{error:"",require:""}}}},Le=["idx","name","contentType","status","mediaFileSize","mediaLength","createdAt","publishAt","dailyEstimatedViews","totalViews","settled","supplierName","supplierManagerName","supplierContact"],Oe=["name","contentType","status","mediaFileIdx","publishStartAt","publishEndAt","supplierName","supplierManagerName","supplierContact","supplierEmail"],Pe=pe(qe,Le,Oe);class E extends fe{constructor(t){super(t),this.mediaFileSize=te(t.mediaFileSize),this.mediaLength=`${t.mediaLength}s`}toRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>["publishStartAt","publishEndAt"].includes(e)?{...t,[e]:k(this[e]).valueOf()}:{...t,[e]:this[e]},{})}toPutRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>["publishStartAt","publishEndAt"].includes(e)?{...t,[e]:k(this[e]).valueOf()}:{...t,[e]:this[e]},{})}}Y(E,"metaData",Pe);const Ye={__name:"index",setup(n){const{page:t,size:e,totalPage:l,loading:o,items:m,addQuery:f}=ue(_),g=E.toColumnHeaders();async function _({contentName:r,c_status:u,s_status:i}){var D;const p={page:t.value,size:e.value};r&&(p.name=r),u&&(p.contentType=u),i&&(p.status=i),o.value=!0,m.value.length=0;const h=await S("content").getPage(p),{result:a,body:v}=h||{};a.httpStatus===200&&(o.value=!1,(D=v==null?void 0:v.data)==null||D.forEach(N=>m.value.push(new E(N))),l.value=(v==null?void 0:v.totalPage)||0)}async function d({item:r,column:u,newValue:i}){var h;if(m.value.findIndex(a=>a.id===r.id)!==-1){if(u.type==="link")return f({view:"detail",id:r.idx});if(u.type==="dropdown"){const a=await S("content").partialUpdate(r.idx,{[u.key]:i});((h=a==null?void 0:a.result)==null?void 0:h.httpStatus)===200&&(r[u.key]=i)}}}return(r,u)=>(b(),A(s(ce),{page:s(t),items:s(m),loading:s(o),totalPage:s(l),columnHeaders:s(g),"onClick:cell":d,"onClick:page":u[0]||(u[0]=i=>s(f)({page:i}))},{header:y(()=>[c(ke)]),toolbar:y(()=>[c(Se)]),alert:y(()=>[c(Ee)]),contentType:y(({item:i,column:p})=>[c($e,{item:i,column:p},null,8,["item","column"])]),publishAt:y(({item:i,column:p})=>[c(Te,{item:i,column:p},null,8,["item","column"])]),_:1},8,["page","items","loading","totalPage","columnHeaders"]))}},Be=T(Ye,[["__scopeId","data-v-fed3f093"]]),ze={__name:"index",setup(n){return(t,e)=>(b(),A(s(ee),null,{title:y(()=>[c(ye)]),content:y(()=>[c(s(Be))]),_:1}))}};function Q(n){const t=E.toFormFields(),{values:e,errors:l,changeRule:o,getFields:m,validateFields:f}=_e(t);return o("supplierEmail",d=>!d||le(d)?"":"올바른 이메일 형식이 아닙니다."),{fields:m([],n),values:e,errors:l,validateFields:f}}const Re={__name:"Upload",props:z({isDetail:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{},error:{},errorModifiers:{},fileName:{},fileNameModifiers:{}}),emits:z(["setRef","keydown:enter"],["update:modelValue","update:error","update:fileName"]),setup(n,{expose:t,emit:e}){const l=q(n,"modelValue"),o=q(n,"error"),m=q(n,"fileName"),f=e,{showAlert:g}=M("alert"),_=V(null),d=i=>(_.value=i,f("setRef",i)),r=()=>(l.value="",_.value.removeFile()),u=async({file:i,callback:p})=>{var v;const h=await he(i),{httpStatus:a}=(h==null?void 0:h.result)||{};if(a!==200)return g("file_length",r);p(),l.value=(v=h==null?void 0:h.body)==null?void 0:v.idx,o.value="",f("keydown:enter")};return t({focus:()=>_.value.focus()}),(i,p)=>{const h=x("FileUpload");return b(),A(h,{ref:a=>d(a),error:o.value,"onUpdate:error":p[0]||(p[0]=a=>o.value=a),labelProps:{required:!0,label:"콘텐츠 업로드"},fileName:m.value,hideButton:!!m.value,buttonProps:{title:"파일 업로드",color:o.value?"red":"primary",size:"medium",width:92},onUpload:u},{"right-desc":y(()=>p[1]||(p[1]=[w("div",null,"* 재생 길이: 15초 또는 30초 * 용량: 15초 기준 xxMB",-1),w("div",null,"* 파일 유형: 24bps, MP4, AVI, MOV, WMV",-1)])),_:1},8,["error","fileName","hideButton","buttonProps"])}}},G=T(Re,[["__scopeId","data-v-9cc3c7be"]]),Ue={__name:"Create",setup(n){const{showAlert:t}=M("alert"),{routeList:e}=F(),{fields:l,values:o,errors:m,validateFields:f}=Q(),g=M("methods");return g.cancel=()=>re(o)?t("cancel"):e(),g.submit=()=>{if(!f())return t("missing");t("regist",async()=>{var r;const _=new E({...o,...o.addressInfo}),d=await S("content").create(_.toRequestBody());t(((r=d==null?void 0:d.result)==null?void 0:r.httpStatus)===200?"regist_complete":"missing")})},(_,d)=>(b(),A(H,{fields:s(l),values:s(o),errors:s(m)},{custom:y(r=>[c(G,oe(se(r)),null,16)]),_:1},8,["fields","values","errors"]))}},je={__name:"Detail",setup(n){const{showAlert:t}=M("alert"),e=M("footer-props"),{getQuery:l,routeList:o}=F(),{fields:m,values:f,errors:g,validateFields:_}=Q(!0),d=["name","contentType","mediaFileIdx"],r=C(()=>m.map(a=>a.map(v=>({...v,disabled:d.includes(v.key)})))),u=V(!1),i=V(""),p=V({});U(async()=>{var $;u.value=!0,e.disabledSubmit=!0;const a=await S("content").getDetail(($=l())==null?void 0:$.id),{result:v,body:D}=a||{};if(v.httpStatus!==200)return;const N=k(D.publishStartAt).format("YYYY-MM-DD"),I=k(D.publishEndAt).format("YYYY-MM-DD");i.value=D.mediaFileName,p.value=R(f,{...D,publishStartAt:N,publishEndAt:I}),u.value=!1}),O(f,()=>e.disabledSubmit=!ne(p.value,f));const h=M("methods");return h.cancel=()=>e.disabledSubmit?o():t("put_cancel"),h.submit2=()=>t("delete",async()=>{var v,D;const a=await S("content").delete((v=l())==null?void 0:v.id);((D=a==null?void 0:a.result)==null?void 0:D.httpStatus)===200&&t("delete_complete")}),h.submit=()=>{if(!_())return t("missing");t("put",async()=>{var $,P;const{name:a,contentType:v,mediaFileIdx:D}=p.value,N=new E({...f,name:a,contentType:v,mediaFileIdx:D}),I=await S("content").update(($=l())==null?void 0:$.id,N.toPutRequestBody());if(((P=I==null?void 0:I.result)==null?void 0:P.httpStatus)===200){t("put_complete"),e.disabledSubmit=!0;const W=k(I.body.publishStartAt).format("YYYY-MM-DD"),K=k(I.body.publishEndAt).format("YYYY-MM-DD");p.value=R(f,{...I.body,publishStartAt:W,publishEndAt:K})}})},(a,v)=>(b(),A(H,{isDetail:"",fields:r.value,values:s(f),errors:s(g)},{custom:y(D=>[c(G,ae({isDetail:""},D,{fileName:i.value,"onUpdate:fileName":v[0]||(v[0]=N=>i.value=N)}),null,16,["fileName"])]),_:1},8,["fields","values","errors"]))}},He={class:"flex justify-between align-center"},Qe={class:"button-group"},Ge={__name:"Footer",props:{isDetail:{type:Boolean,default:!1}},setup(n){const t=M("methods"),e=M("footer-props");return(l,o)=>{const m=x("Button");return b(),L("div",He,[o[0]||(o[0]=w("div",null,null,-1)),w("div",Qe,[c(m,{outlined:"",width:55,title:n.isDetail?"목록":"취소",size:"medium",color:"neutral",onClick:s(t).cancel},null,8,["title","onClick"]),n.isDetail?(b(),A(m,{key:0,width:55,title:"삭제",size:"medium",color:"red",onClick:s(t).submit2},null,8,["onClick"])):ie("",!0),c(m,{size:"medium",color:"primary",width:55,title:n.isDetail?"수정":"등록",disabled:s(e).disabledSubmit,onClick:s(t).submit},null,8,["title","disabled","onClick"])])])}}},We=T(Ge,[["__scopeId","data-v-8f19d9e8"]]),Ke={__name:"Alert",setup(n){const{alertObj:t}=M("alert"),{routeList:e}=F(),l=C(()=>t.type),o=C(()=>l.value==="regist"?"일반 콘텐츠를 등록하시겠습니까?":l.value==="regist_complete"?"일반 콘텐츠 등록 완료":l.value==="cancel"?"일반 콘텐츠 등록을 취소하시겠습니까?":l.value==="missing"?"잘못된 정보 또는 누락된 정보가 있습니다.":l.value==="file_size"?"일반 콘텐츠 파일 용량을 확인해 주세요.":l.value==="file_length"?"일반 콘텐츠 파일 길이를 확인해 주세요.":l.value==="put"?"일반 콘텐츠 정보를 수정하시겠습니까?":l.value==="put_complete"?"일반 콘텐츠 정보 수정 완료":l.value==="put_cancel"?"일반 콘텐츠 정보 수정을 취소하시겠습니까?":l.value==="delete"?"일반 콘텐츠 정보를 삭제하시겠습니까?":l.value==="delete_complete"?"일반 콘텐츠 삭제 완료":""),m=C(()=>l.value==="regist_complete"?"일반 콘텐츠 등록이 완료됐습니다.":l.value==="cancel"?`일반 콘텐츠 등록을 취소할 경우,
입력한 정보가 삭제됩니다.`:l.value==="missing"?"입력한 정보를 다시 한번 확인해주세요.":l.value==="file_size"||l.value==="file_length"?"파일 업로드 옆 파일 양식을 확인해 주세요.":l.value==="put"?"정확한 정보로 입력했는지 확인하셨나요?":l.value==="put_complete"?"일반 콘텐츠 정보 수정이 완료됐습니다.":l.value==="put_cancel"?`수정을 취소하면,
입력한 정보가 삭제됩니다.`:l.value==="delete"?`콘텐츠 정보가 삭제되면,
기존 데이터가 전체 삭제되고
콘텐츠 재생이 중단됩니다.`:l.value==="delete_complete"?"일반 콘텐츠 삭제 완료됐습니다.":""),f=C(()=>["missing","file_size","file_length"].includes(l.value)),g=C(()=>["regist","cancel","put","put_cancel","delete"].includes(l.value)),_=C(()=>l.value!=="regist"),d=C(()=>({cancel:e,regist:t["click:confirm"],regist_complete:e,file_size:t["click:confirm"],file_length:t["click:confirm"],put:t["click:confirm"],put_cancel:e,delete:t["click:confirm"],delete_complete:e}));return(r,u)=>{const i=x("Alert",!0);return b(),A(i,{modelValue:s(t).show,"onUpdate:modelValue":u[0]||(u[0]=p=>s(t).show=p),title:o.value,error:f.value,message:m.value,showCancel:g.value,confirmClickClose:_.value,"onClick:confirm":d.value[l.value]},null,8,["modelValue","title","error","message","showCancel","confirmClickClose","onClick:confirm"])}}},Je={__name:"index",setup(n){const{isDetail:t}=F();return(e,l)=>(b(),A(s(ve),{title:s(t)?"일반 콘텐츠 정보":"일반 콘텐츠 등록"},{content:y(()=>[s(t)?(b(),A(je,{key:0})):(b(),A(Ue,{key:1}))]),footer:y(()=>[c(We,{isDetail:s(t)},null,8,["isDetail"])]),alert:y(()=>[c(Ke)]),_:1},8,["title"]))}},ct={__name:"index",setup(n){const{getQuery:t}=F();return(e,l)=>{var o;return["add","detail"].includes((o=s(t)())==null?void 0:o.view)?(b(),A(s(Je),{key:0})):(b(),A(s(ze),{key:1}))}}};export{ct as default};
