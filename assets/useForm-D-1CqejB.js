import{q as E,r as W,W as x}from"./index-BGi8GpGv.js";function m(n){const f={},p=E(n.reduce((e,r)=>r.group?{...e,[r.group]:{...e[r.group]||{},[r.key]:""}}:{...e,[r.key]:""},{})),g=E(n.reduce((e,r)=>r.group?{...e,[r.group]:{...e[r.group]||{},[r.key]:""}}:{...e,[r.key]:""},{})),h=W(!1),F=n.reduce((e,r)=>{const o=r.group?g[r.group]:g,s=(u,k)=>!h.value&&u&&(o[k]="");return r.group?{...e,[r.group]:{...e[r.group]||{},[r.key]:u=>s(u,r.key)}}:{...e,[r.key]:u=>s(u,r.key)}},{});function c(e){return f[e]}function _({el:e,key:r}){f[r]=e}function v(e,r){var k,R,i,a,q;const o=n.find(t=>t.key===e);if(!o.group){if(g[e])return!1;if(o.required&&x(p[e]))return g[e]=((k=o==null?void 0:o.errorMessages)==null?void 0:k.require)||"",!1}const s=n.findIndex(t=>t.key===e);if(s===-1)return!1;let u=s;for(;;){const{group:t,key:y}=n[u];if(!(r||[]).includes(y)){if(t&&x(p[t][y]))return(R=c(t))==null||R.focus(),!1;if(!t&&x(p[y]))return(i=c(y))==null||i.focus(),!1}if(u=(u+1)%n.length,s===u){const{group:I,key:M}=n[(s+1)%n.length];(q=(a=c(I||M))==null?void 0:a.focus)==null||q.call(a);break}}return!0}function w(e,r,o){v(e,o)&&(r==null||r())}return{refs:f,values:p,errors:g,rules:F,preventRules:h,setRef:_,getRef:c,nextFocus:v,handleEnter:w}}export{m as u};
