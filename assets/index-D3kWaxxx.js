var R=Object.defineProperty;var j=(o,e,r)=>e in o?R(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r;var S=(o,e,r)=>j(o,typeof e!="symbol"?e+"":e,r);import{u as b}from"./useCustomRouter-CiU2rkZM.js";import{T as z,L as F}from"./index-Dm8pkpH6.js";import{a as A,o as u,c as y,b as h,d as _,u as a,_ as T,q as H,v as x,k as q,w as N,e as k,f as w,F as E,j as M,p as f,t as I,A as G,r as $,B as Q}from"./index-BGi8GpGv.js";import{a as O}from"./index-CJtyaUy2.js";import{u as U,G as K}from"./index-DQhdp3Mo.js";import{P as W}from"./index-CBHngC_A.js";import{c as Y,D as Z}from"./metaHelper-B8_iLp7n.js";import{u as J,C as L,a as X}from"./Content-CKsiGma2.js";import"./useForm-D-1CqejB.js";const ee={__name:"Title",setup(o){const{addQuery:e}=b();return(r,t)=>{const l=A("Button");return u(),y(a(z),{title:"기기 유형 관리"},{rightArea:h(()=>[_(l,{outlined:"",width:101,size:"x-small",title:"기기 유형 등록",onClick:t[0]||(t[0]=p=>a(e)({view:"add"}))})]),_:1})}}},te={class:"grid-header-wrapper"},re={class:"item-wrapper"},le={class:"checkbox-wrapper"},oe={__name:"Header",setup(o){const e=H([{value:"DID",title:"DID",checked:!0},{value:"KIOSK",title:"키오스크",checked:!0},{value:"POS",title:"포스",checked:!0},{value:"TABLE_ORDER",title:"테이블 오더",checked:!0},{value:"WAITING",title:"웨이팅",checked:!0},{value:"DISPLAY_BOARD",title:"전광판",checked:!0}]),{showAlert:r}=x("alert"),{getQuery:t,addQuery:l}=b();q(p),N(t,p);function p(){var n;if(!((n=t())!=null&&n.filter))return;Array.from(e).forEach(c=>c.checked=!1);const v=Array.isArray(t().filter)?t().filter:[t().filter];Array.from(v).forEach(c=>{const d=e.findIndex(s=>s.value===(c==null?void 0:c.toLocaleUpperCase()));d!==-1&&(e[d].checked=!0)})}function g(){if(e.filter(n=>n.checked).map(n=>n.value).length===0)return r("search_require");l({filter:e.filter(n=>n.checked).map(n=>n.value)})}return(v,n)=>{const c=A("Checkbox"),d=A("Button");return u(),k("div",te,[w("div",re,[n[0]||(n[0]=w("div",null,"기기 유형",-1)),w("div",le,[(u(!0),k(E,null,M(e,s=>(u(),y(c,{key:s.value,modelValue:s.checked,"onUpdate:modelValue":i=>s.checked=i,label:s.title,value:s.value},null,8,["modelValue","onUpdate:modelValue","label","value"]))),128))])]),w("div",null,[_(d,{size:"tiny",title:"적용",onClick:g})])])}}},ae=T(oe,[["__scopeId","data-v-cda6e541"]]),se={class:"toolbar-wrapper"},ne={class:"right-area"},ie={__name:"Toolbar",setup(o){return(e,r)=>{const t=A("Button");return u(),k("div",se,[r[0]||(r[0]=w("div",{class:"left-area"},null,-1)),w("div",ne,[_(t,{color:"green",size:"x-small",title:"다운로드"}),_(a(W))])])}}},ce=T(ie,[["__scopeId","data-v-325e21f5"]]),ue={__name:"DeviceType",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(o){const e=o,r=f(()=>{var t;return((t=e.column.items.find(l=>l.value===e.item.deviceType))==null?void 0:t.title)||""});return(t,l)=>(u(),k("div",null,I(r.value),1))}},de={__name:"DeviceDetailType",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(o){const e=o,r=f(()=>{var t;return((t=e.column.items.find(l=>l.value===e.item.deviceDetailType))==null?void 0:t.title)||""});return(t,l)=>(u(),k("div",null,I(r.value),1))}},me={__name:"StorageSize",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(o){return(e,r)=>(u(),k("div",null,I(`${o.item.storageSize||0}GB`),1))}},pe={__name:"Os",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(o){const e=o,r=f(()=>{var t;return((t=e.column.items.find(l=>l.value===e.item.os))==null?void 0:t.title)||""});return(t,l)=>(u(),k("div",null,I(r.value),1))}},_e={__name:"Alert",setup(o){const{alertObj:e}=x("alert"),r=f(()=>e.type),t=f(()=>r.value==="search_require"?"1개 이상 선택해야 합니다.":""),l=f(()=>r.value==="search_require"?"1개 이상은 반드시 선택해 주세요.":""),p=f(()=>r.value==="search_require");return(g,v)=>{const n=A("Alert",!0);return u(),y(n,{modelValue:a(e).show,"onUpdate:modelValue":v[0]||(v[0]=c=>a(e).show=c),error:p.value,title:t.value,message:l.value},null,8,["modelValue","error","title","message"])}}},ve={idx:{column:{title:"NO",type:"text"}},deviceType:{column:{title:"기기 유형",type:"text"},form:{row:1,required:!0,autoFocus:!0,component:"dropdown",class:"w-318",label:"기기 유형",placeholder:"기기 유형을 선택해 주세요.",errorMessages:{error:"",require:""}},common:{items:[{value:"DID",title:"DID"},{value:"KIOSK",title:"키오스크"},{value:"POS",title:"포스"},{value:"TABLE_ORDER",title:"테이블 오더"},{value:"WAITING",title:"웨이팅"},{value:"DISPLAY_BOARD",title:"전광판"}]}},deviceDetailType:{column:{title:"세부 유형",type:"text"},form:{row:1,required:!0,component:"dropdown",class:"w-318",label:"기기 세부 유형",placeholder:"기기 타입을 선택해 주세요.",errorMessages:{error:"",require:""}},common:{items:[{value:"STANDARD",title:"일반"},{value:"VERTICAL",title:"세로형"},{value:"HORIZONTAL_A",title:"가로형 A"},{value:"HORIZONTAL_B",title:"가로형 B"}]}},numberPrefix:{column:{title:"넘버링",type:"text"},form:{row:2,required:!0,component:"input",class:"w-318",label:"넘버링",placeholder:"넘버링 패턴을 입력해 주세요.",errorMessages:{error:"",require:""}}},storageSize:{column:{title:"HDD 용량",type:"text"},form:{row:3,required:!0,component:"input",type:"number",class:"w-318",label:"HDD 용량 (GB)",placeholder:"HDD 용량을 입력해 주세요.",errorMessages:{error:"",require:""}}},os:{column:{title:"OS",type:"text"},form:{row:4,required:!0,component:"dropdown",class:"w-318",label:"기기 OS",placeholder:"기기 OS를 선택해 주세요.",errorMessages:{error:"",require:""}},common:{items:[{value:"WINDOWS",title:"윈도우"},{value:"ANDROID",title:"안드로이드"}]}},installLocation:{column:{title:"설치 위치",type:"text"},form:{row:5,required:!0,component:"input",class:"w-318",label:"설치 위치",placeholder:"설치 위치를 입력해 주세요.",errorMessages:{error:"",require:""}}},createdAt:{column:{title:"등록일",type:"date"}},detailView:{column:{title:"상세보기",type:"link"}}},fe=["idx","deviceType","deviceDetailType","numberPrefix","storageSize","os","installLocation","createdAt","detailView"],he=["deviceType","deviceDetailType","numberPrefix","storageSize","os","installLocation"],ye=Y(ve,fe,he);class C extends Z{constructor(e){super(e),this.detailView="상세보기"}toRequestBody(){return this.constructor.metaData.form.reduce((e,{key:r})=>({...e,[r]:this[r]}),{})}}S(C,"metaData",ye);const ge={__name:"index",setup(o){const{page:e,size:r,totalPage:t,loading:l,items:p,addQuery:g}=U(n),v=C.toColumnHeaders();async function n({filter:d}){var B;d=Array.isArray(d)?d:[d];const s={page:e.value,size:r.value,deviceTypes:d};l.value=!0,p.value.length=0;const i=await O("device/category").getPage(s),{result:m,body:D}=i||{};m.httpStatus===200&&(l.value=!1,(B=D==null?void 0:D.data)==null||B.forEach(P=>p.value.push(new C(P))),t.value=(D==null?void 0:D.totalPage)||0)}function c({item:d,column:s}){if(s.type==="link")return g({view:"detail",id:d.idx})}return(d,s)=>(u(),y(a(K),{page:a(e),items:a(p),loading:a(l),totalPage:a(t),columnHeaders:a(v),"onClick:cell":c,"onClick:page":s[0]||(s[0]=i=>a(g)({page:i}))},{header:h(()=>[_(ae)]),toolbar:h(()=>[_(ce)]),alert:h(()=>[_(_e)]),deviceType:h(({column:i,item:m})=>[_(ue,{column:i,item:m},null,8,["column","item"])]),deviceDetailType:h(({column:i,item:m})=>[_(de,{column:i,item:m},null,8,["column","item"])]),storageSize:h(({column:i,item:m})=>[_(me,{column:i,item:m},null,8,["column","item"])]),os:h(({column:i,item:m})=>[_(pe,{column:i,item:m},null,8,["column","item"])]),_:1},8,["page","items","loading","totalPage","columnHeaders"]))}},De=T(ge,[["__scopeId","data-v-7e2863c5"]]),we={__name:"index",setup(o){return(e,r)=>(u(),y(a(F),null,{title:h(()=>[_(ee)]),content:h(()=>[_(a(De))]),_:1}))}};function V(){const o=C.toFormFields(),{values:e,errors:r,getFields:t,validateFields:l}=J(o);return{fields:t(),values:e,errors:r,validateFields:l}}const xe={__name:"Create",setup(o){const{showAlert:e}=x("alert"),{routeList:r}=b(),{fields:t,values:l,errors:p,validateFields:g}=V(),v=x("methods");return v.cancel=()=>G(l)?e("cancel"):r(),v.submit=()=>{if(!g())return e("missing");e("regist",async()=>{var d;const n=new C({...l}),c=await O("device/category").create(n.toRequestBody());e(((d=c==null?void 0:c.result)==null?void 0:d.httpStatus)===200?"regist_complete":"missing")})},(n,c)=>(u(),y(L,{fields:a(t),values:a(l),errors:a(p)},null,8,["fields","values","errors"]))}},ke={__name:"Detail",setup(o){const{showAlert:e}=x("alert"),{getQuery:r,routeList:t}=b(),{fields:l,values:p,errors:g}=V(),v=f(()=>l.map(s=>s.map(i=>({...i,disabled:!0})))),n=$(!1),c=$(null);q(async()=>{var D;n.value=!0;const s=await O("device/category").getDetail((D=r())==null?void 0:D.id),{result:i,body:m}=s||{};i.httpStatus===200&&(Q(p,{...m,partnerIdx:m.partnerName,deviceCategoryIdx:m.deviceDetailType}),c.value=m.createdAt,n.value=!1)});const d=x("methods");return d.cancel=t,d.submit=()=>{e("delete",async()=>{var i,m;const s=await O("device/category").delete((i=r())==null?void 0:i.id);((m=s==null?void 0:s.result)==null?void 0:m.httpStatus)===200&&e("delete_complete")})},(s,i)=>(u(),y(L,{isDetail:"",fields:v.value,values:a(p),errors:a(g),createdAt:c.value},null,8,["fields","values","errors","createdAt"]))}},Ae={class:"flex justify-between align-center"},be={class:"button-group"},Ce={__name:"Footer",props:{isDetail:{type:Boolean,default:!1}},setup(o){const e=x("methods");return(r,t)=>{const l=A("Button");return u(),k("div",Ae,[t[0]||(t[0]=w("div",null,null,-1)),w("div",be,[_(l,{outlined:"",width:55,size:"medium",color:"neutral",title:o.isDetail?"목록":"취소",onClick:a(e).cancel},null,8,["title","onClick"]),_(l,{size:"medium",width:55,color:o.isDetail?"red":"primary",title:o.isDetail?"삭제":"등록",onClick:a(e).submit},null,8,["color","title","onClick"])])])}}},Oe=T(Ce,[["__scopeId","data-v-68de7f3e"]]),Te={__name:"Alert",setup(o){const{alertObj:e}=x("alert"),{routeList:r}=b(),t=f(()=>e.type),l=f(()=>t.value==="regist"?"기기 유형을 등록하시겠습니까?":t.value==="regist_complete"?"기기 유형 등록 완료":t.value==="cancel"?"기기 유형 등록을 취소하시겠습니까?":t.value==="missing"?"잘못된 정보 또는 누락된 정보가 있습니다.":t.value==="delete"?"기기 유형 정보를 삭제하시겠습니까?":t.value==="delete_complete"?"기기 유형 정보 삭제 완료":""),p=f(()=>t.value==="regist_complete"?"기기 유형 등록이 완료됐습니다.":t.value==="cancel"?`기기 유형 등록을 취소할 경우,
입력한 정보가 삭제됩니다.`:t.value==="missing"?"입력한 정보를 다시 한번 확인해주세요.":t.value==="delete"?`기기 유형 정보가 삭제되면,
기존 데이터가 전체 삭제 됩니다.`:t.value==="delete_complete"?"기기 유형 정보 삭제 완료됐습니다.":""),g=f(()=>t.value==="missing"),v=f(()=>["regist","cancel","delete"].includes(t.value)),n=f(()=>t.value!=="regist"),c=f(()=>({cancel:r,regist:e["click:confirm"],regist_complete:r,delete:e["click:confirm"],delete_complete:r}));return(d,s)=>{const i=A("Alert",!0);return u(),y(i,{modelValue:a(e).show,"onUpdate:modelValue":s[0]||(s[0]=m=>a(e).show=m),title:l.value,error:g.value,message:p.value,showCancel:v.value,confirmClickClose:n.value,"onClick:confirm":c.value[t.value]},null,8,["modelValue","title","error","message","showCancel","confirmClickClose","onClick:confirm"])}}},Ie={__name:"index",setup(o){const{isDetail:e}=b();return(r,t)=>(u(),y(a(X),{title:a(e)?"기기 유형 정보":"기기 유형 등록"},{content:h(()=>[a(e)?(u(),y(ke,{key:0})):(u(),y(xe,{key:1}))]),footer:h(()=>[_(Oe,{isDetail:a(e)},null,8,["isDetail"])]),alert:h(()=>[_(Te)]),_:1},8,["title"]))}},Fe={__name:"index",setup(o){const{getQuery:e}=b();return(r,t)=>{var l;return["add","detail"].includes((l=a(e)())==null?void 0:l.view)?(u(),y(a(Ie),{key:0})):(u(),y(a(we),{key:1}))}}};export{Fe as default};
