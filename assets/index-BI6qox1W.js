var S=Object.defineProperty;var T=(s,t,e)=>t in s?S(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var $=(s,t,e)=>T(s,typeof t!="symbol"?t+"":t,e);import{u as F}from"./useCustomRouter-CiU2rkZM.js";import{T as j,L as G}from"./index-Dm8pkpH6.js";import{o as h,c as w,u as m,_ as M,r as A,w as R,k as B,a as x,e as I,f as C,d as i,b as D,s as L,p as y,C as q,t as O,W as U,v as E,B as z,G as H}from"./index-BGi8GpGv.js";import{a as V}from"./index-CJtyaUy2.js";import{u as Q,G as Y}from"./index-DQhdp3Mo.js";import{S as K}from"./SearchIcon-C8b4b_FZ.js";import{P as W}from"./index-CBHngC_A.js";import{c as J,D as X}from"./metaHelper-B8_iLp7n.js";import{u as Z,C as ee,a as te}from"./Content-CKsiGma2.js";import"./useForm-D-1CqejB.js";const ne={__name:"Title",setup(s){return(t,e)=>(h(),w(m(j),{title:"대행사 관리"}))}},ae={class:"grid-header-wrapper"},oe={class:"left-area"},re={class:"item-wrapper"},le={class:"search-field"},se={class:"item-wrapper"},ue={class:"item-wrapper"},ie={__name:"Header",setup(s){const{getQuery:t,changeQuery:e}=F(),n=A({}),u=(p,a)=>y({get:()=>n.value[p]||a,set:r=>n.value[p]=r&&r!=="ALL"?String(r).toUpperCase():void 0}),_=u("b_status","ALL"),f=u("s_status","ALL"),b=A("");R(b,p=>n.value.agencyName=p||void 0),B(v),R(t,v);function v(){var p;b.value=((p=t())==null?void 0:p.agencyName)||void 0,["b_status","s_status","pageSize"].forEach(a=>{const r=t()[a];n.value[a]=r&&r!=="ALL"?r.toUpperCase():void 0})}return(p,a)=>{const r=x("Input"),o=x("Radio"),l=x("RadioGroup"),d=x("Button");return h(),I("div",ae,[C("div",oe,[C("div",re,[a[5]||(a[5]=C("div",null,"검색어",-1)),C("div",le,[i(r,{placeholder:"검색어를 입력해 주세요.",modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=c=>b.value=c),"onKeydown:enter":a[1]||(a[1]=c=>m(e)(n.value))},{"prepend-icon":D(()=>[i(K,{class:"mr-2"})]),_:1},8,["modelValue"])])]),C("div",se,[a[6]||(a[6]=C("div",null,"계정 구분",-1)),i(l,{modelValue:m(_),"onUpdate:modelValue":a[2]||(a[2]=c=>L(_)?_.value=c:null)},{default:D(()=>[i(o,{label:"전체",value:"ALL"}),i(o,{label:"대행사",value:"AGENCY"}),i(o,{label:"랩사",value:"MEDIALAB"})]),_:1},8,["modelValue"])]),C("div",ue,[a[7]||(a[7]=C("div",null,"승인 상태",-1)),i(l,{modelValue:m(f),"onUpdate:modelValue":a[3]||(a[3]=c=>L(f)?f.value=c:null)},{default:D(()=>[i(o,{label:"전체",value:"ALL"}),i(o,{label:"사용",value:"VERIFIED"}),i(o,{label:"대기",value:"PENDING"}),i(o,{label:"거절",value:"REJECTED"})]),_:1},8,["modelValue"])])]),C("div",null,[i(d,{size:"tiny",title:"적용",onClick:a[4]||(a[4]=c=>m(e)(n.value))})])])}}},ce=M(ie,[["__scopeId","data-v-15d9df61"]]),me={class:"toolbar-wrapper"},pe={class:"right-area"},de={__name:"Toolbar",setup(s){return(t,e)=>{const n=x("Button");return h(),I("div",me,[e[0]||(e[0]=C("div",{class:"left-area"},null,-1)),C("div",pe,[i(n,{color:"green",size:"x-small",title:"다운로드"}),i(m(W))])])}}},fe=M(de,[["__scopeId","data-v-56de3143"]]),_e={__name:"Alert",props:{modelValue:{},modelModifiers:{},type:{},typeModifiers:{}},emits:["update:modelValue","update:type"],setup(s){const t=q(s,"modelValue"),e=q(s,"type"),n=y(()=>e.value==="refresh"?"새로고침을 진행하시겠습니까?":e.value==="refresh_complete"?"DID 새로고침 완료":e.value==="restart"?"재시작을 진행하시겠습니까?":e.value==="restart_complete"?"DID 재시작 완료":e.value==="update"?"업데이트를 진행하시겠습니까?":e.value==="update_complete"?"DID 업데이트 완료":e.value==="on"?"기기 사용을 ON 하시겠습니까?":e.value==="on_complete"?"기기 사용 ON 완료":e.value==="off"?"기기 사용을 OFF 하시겠습니까?":e.value==="off_complete"?"기기 사용 OFF 완료":e.value==="finish"?"기기를 종료하시겠습니까?":e.value==="finish_complete"?"기기 종료 완료":""),u=y(()=>e.value==="refresh"?`새로고침을 할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="refresh_complete"?"DID 새로고침이 완료됐습니다.":e.value==="restart"?`재시작을 할 경우,
기기에 콘텐츠 노출이 멈추게 됩니다.`:e.value==="restart_complete"?`DID 재시작이 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="update"?`업데이트를 진행할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="update_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="on"?`기기 사용을 ON 하게 되면,
기기가 활성화됩니다.`:e.value==="on_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="off"?`기기 사용을 OFF 하게 되면,
기기 화면이 대기 상태로 전환되게 됩니다.`:e.value==="off_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="finish"?`기기 사용을 OFF 하게 되면,
기기가 꺼지게 됩니다.`:e.value==="finish_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:""),_=y(()=>{var v;return!((v=e.value)!=null&&v.endsWith("_complete"))}),f=y(()=>{var v;return(v=e.value)==null?void 0:v.endsWith("_complete")});function b(){e.value=`${e.value}_complete`}return(v,p)=>{const a=x("Alert",!0);return h(),w(a,{modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=r=>t.value=r),title:n.value,message:u.value,showCancel:_.value,confirmClickClose:f.value,"onClick:confirm":b},null,8,["modelValue","title","message","showCancel","confirmClickClose"])}}},ve={__name:"BusinessType",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(s){const t=s,e=y(()=>{var n;return(n=t.column.items.find(u=>u.value===t.item[t.column.key]))==null?void 0:n.title});return(n,u)=>(h(),I("div",null,O(e.value),1))}},ye={__name:"PaymentMethod",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(s){const t=s,e=y(()=>{var n;return((n=t.column.items.find(u=>u.value===t.item[t.column.key]))==null?void 0:n.title)||"-"});return(n,u)=>(h(),I("div",null,O(e.value),1))}},he={__name:"PaymentDay",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(s){const t=s,e=y(()=>t.item[t.column.key]||"-");return(n,u)=>(h(),I("div",null,O(e.value),1))}},ge={__name:"FeeRate",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(s){const t=s,e=y(()=>t.item[t.column.key]?`${t.item[t.column.key]}%`:"-");return(n,u)=>(h(),I("div",null,O(e.value),1))}},De={idx:{column:{title:"NO",type:"text"}},name:{column:{title:"회사 명",type:"text"},form:{row:1,required:!0,component:"input",class:"w-318",label:"대행사 명",placeholder:"대행사 명을 입력해 주세요.",errorMessages:{error:"",require:""}}},businessType:{column:{title:"계정 구분",type:"text"},common:{items:[{title:"대행사",value:"AGENCY"},{title:"랩사",value:"MEDIALAB"},{title:"일반",value:"COMPANY"}]}},status:{column:{title:"승인 상태",type:"dropdown"},form:{row:2,required:!0,autoFocus:!0,component:"dropdown",class:"w-318",label:"승인",placeholder:"승인 여부를 선택해 주세요.",errorMessages:{error:"",require:""}},common:{items:[{title:"사용",value:"VERIFIED"},{title:"대기",value:"PENDING"},{title:"거절",value:"REJECTED"}]}},paymentMethod:{column:{title:"결제 구분",type:"text"},form:{row:3,required:!0,component:"dropdown",class:"w-318",label:"결제 구분",placeholder:"결제 구분을 선택해 주세요.",errorMessages:{error:"",require:""}},common:{items:[{title:"충전 방식",value:"PREPAID"},{title:"후 결제",value:"POSTPAID"},{title:"지면 구매",value:"DELAYED_PURCHASE"}]}},paymentDay:{column:{title:"결제일",type:"text"},form:{row:3,required:!0,component:"input",type:"number",class:"w-318",label:"결제 일",placeholder:"숫자만 입력해 주세요.",errorMessages:{error:"",require:""}}},feeRate:{column:{title:"수수료",type:"text"},form:{row:4,required:!0,component:"input",type:"number",class:"w-318",label:"수수료 율 (%)",placeholder:"숫자만 입력해 주세요.",errorMessages:{error:"",require:""}}},managerName:{column:{title:"대표 계정 담당자",type:"text"}},managerEmail:{column:{title:"대표 계정 이메일",type:"text"}},managerPhone:{column:{title:"대표 계정 연락처",type:"text"}},invoiceEmail:{column:{title:"세금계산서 이메일",type:"text"},form:{row:5,required:!0,component:"input",class:"w-318",label:"세금계산서 이메일",placeholder:"세금계산서 이메일을 입력해 주세요.",errorMessages:{error:"",require:""}}},detailView:{column:{title:"상세보기",type:"link"}}},be=["idx","name","businessType","status","paymentMethod","paymentDay","feeRate","managerName","managerEmail","managerPhone","invoiceEmail","detailView"],Ce=["name","status","paymentMethod","paymentDay","feeRate","invoiceEmail"],we=J(De,be,Ce);class k extends X{constructor(t){super(t),this.detailView="상세보기"}toRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>({...t,[e]:this[e]}),{})}toPutRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>e==="paymentDay"?{...t,[e]:parseInt(this[e])}:{...t,[e]:this[e]},{})}}$(k,"metaData",we);const xe={__name:"index",setup(s){const{page:t,size:e,totalPage:n,loading:u,items:_,addQuery:f}=Q(v),b=k.toColumnHeaders();async function v({agencyName:a,b_status:r,s_status:o}){var P;const l={page:t.value,size:e.value};a&&(l.searchKeyword=a),r&&(l.businessType=r),o&&(l.status=o),u.value=!0,_.value.length=0;const d=await V("company").getPage(l),{result:c,body:g}=d||{};c.httpStatus===200&&(u.value=!1,(P=g==null?void 0:g.data)==null||P.forEach(N=>_.value.push(new k(N))),n.value=(g==null?void 0:g.totalPage)||0)}async function p({item:a,column:r,newValue:o}){var d;if(_.value.findIndex(c=>c.id===a.id)!==-1){if(r.type==="link")return f({view:"detail",id:a.idx});if(r.type==="dropdown"){const c=await V("company").partialUpdate(a.idx,{[r.key]:o});((d=c==null?void 0:c.result)==null?void 0:d.httpStatus)===200&&(a[r.key]=o)}}}return(a,r)=>(h(),w(m(Y),{page:m(t),items:m(_),loading:m(u),totalPage:m(n),columnHeaders:m(b),"onClick:cell":p,"onClick:page":r[0]||(r[0]=o=>m(f)({page:o}))},{header:D(()=>[i(ce)]),toolbar:D(()=>[i(fe)]),alert:D(()=>[i(_e)]),businessType:D(({item:o,column:l})=>[i(ve,{item:o,column:l},null,8,["item","column"])]),paymentMethod:D(({item:o,column:l})=>[i(ye,{item:o,column:l},null,8,["item","column"])]),paymentDay:D(({item:o,column:l})=>[i(he,{item:o,column:l},null,8,["item","column"])]),feeRate:D(({item:o,column:l})=>[i(ge,{item:o,column:l},null,8,["item","column"])]),_:1},8,["page","items","loading","totalPage","columnHeaders"]))}},Ie=M(xe,[["__scopeId","data-v-f400aab8"]]),Ee={__name:"index",setup(s){return(t,e)=>(h(),w(m(G),null,{title:D(()=>[i(ne)]),content:D(()=>[i(m(Ie))]),_:1}))}};function Pe(s){const t=k.toFormFields(),{values:e,errors:n,getRef:u,getFields:_}=Z(t),f=_([],s);function b(v){var a;let p;for(const{required:r,key:o,group:l,errorMessages:d}of t){const c=l?e[l]:e,g=l?n[l]:n;(v||[]).includes(o)||(g[o]&&!p&&(p=o),!(o==="paymentDay"&&c.paymentMethod==="PREPAID")&&r&&U(c[o])&&(p||(p=o),g[o]=(d==null?void 0:d.require)||" "))}return(a=u(p))==null||a.focus(),!p}return{fields:f,values:e,errors:n,validateFields:b}}const ke={__name:"Detail",setup(s){const{showAlert:t}=E("alert"),e=E("footer-props"),{getQuery:n,routeList:u}=F(),{fields:_,values:f,errors:b,validateFields:v}=Pe(!0),p=y(()=>_.map(l=>l.map(d=>{if(d.key==="paymentDay"){const c=f.paymentMethod==="PREPAID";return{...d,disabled:c,required:!c}}return{...d,disabled:d.key==="name"}})));R(()=>f.paymentMethod,l=>{const d=l==="PREPAID";f.paymentDay=d?"":r.value.paymentDay});const a=A(!1),r=A({});B(async()=>{var g;a.value=!0,e.disabledSubmit=!0;const l=await V("company").getDetail((g=n())==null?void 0:g.id),{result:d,body:c}=l||{};d.httpStatus===200&&(r.value=z(f,{...c}),a.value=!1)}),R(f,()=>e.disabledSubmit=!H(r.value,f));const o=E("methods");return o.cancel=()=>e.disabledSubmit?u():t("put_cancel"),o.submit=()=>{if(!v())return t("missing");t("put",async()=>{var g,P;const{name:l}=r.value,d=new k({...f,name:l}),c=await V("company").update((g=n())==null?void 0:g.id,d.toPutRequestBody());((P=c==null?void 0:c.result)==null?void 0:P.httpStatus)===200&&t("put_complete")})},(l,d)=>(h(),w(ee,{isDetail:"",fields:p.value,values:m(f),errors:m(b)},null,8,["fields","values","errors"]))}},Ae={class:"flex justify-between align-center"},Re={class:"button-group"},Ve={__name:"Footer",setup(s){const t=E("methods"),e=E("footer-props");return(n,u)=>{const _=x("Button");return h(),I("div",Ae,[u[0]||(u[0]=C("div",null,null,-1)),C("div",Re,[i(_,{outlined:"",title:"취소",size:"medium",color:"neutral",width:55,onClick:m(t).cancel},null,8,["onClick"]),i(_,{title:"수정",size:"medium",color:"primary",width:55,disabled:m(e).disabledSubmit,onClick:m(t).submit},null,8,["disabled","onClick"])])])}}},Fe=M(Ve,[["__scopeId","data-v-84e50e6e"]]),Me={__name:"Alert",setup(s){const{alertObj:t}=E("alert"),{routeList:e}=F(),n=y(()=>t.type),u=y(()=>n.value==="missing"?"잘못된 정보 또는 누락된 정보가 있습니다.":n.value==="put"?"대행사 정보를 수정하시겠습니까?":n.value==="put_cancel"?"대행사 정보 수정을 취소하시겠습니까?":n.value==="put_complete"?"대행사 수정 완료.":""),_=y(()=>n.value==="missing"?"입력한 정보를 다시 한번 확인해주세요.":n.value==="put"?"수정할 내용을 충분히 확인하셨나요?":n.value==="put_cancel"?`수정을 취소하면,
입력한 정보가 삭제됩니다.`:n.value==="put_complete"?"대행사 수정 완료됐습니다.":""),f=y(()=>n.value==="missing"),b=y(()=>["put","put_cancel"].includes(n.value)),v=y(()=>n.value!=="put"),p=y(()=>({put_cancel:e,put_complete:e,put:t["click:confirm"]}));return(a,r)=>{const o=x("Alert",!0);return h(),w(o,{modelValue:m(t).show,"onUpdate:modelValue":r[0]||(r[0]=l=>m(t).show=l),error:f.value,title:u.value,message:_.value,showCancel:b.value,confirmClickClose:v.value,"onClick:confirm":p.value[n.value]},null,8,["modelValue","error","title","message","showCancel","confirmClickClose","onClick:confirm"])}}},Oe={__name:"index",setup(s){return(t,e)=>(h(),w(m(te),{title:"사용자 상세 정보"},{content:D(()=>[i(ke)]),footer:D(()=>[i(Fe)]),alert:D(()=>[i(Me)]),_:1}))}},He={__name:"index",setup(s){const{getQuery:t}=F();return(e,n)=>{var u;return["detail"].includes((u=m(t)())==null?void 0:u.view)?(h(),w(m(Oe),{key:0})):(h(),w(m(Ee),{key:1}))}}};export{He as default};
