var U=Object.defineProperty;var G=(c,t,e)=>t in c?U(c,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[t]=e;var F=(c,t,e)=>G(c,typeof t!="symbol"?t+"":t,e);import{u as b}from"./useCustomRouter-CiU2rkZM.js";import{T as Q,L as z}from"./index-Dm8pkpH6.js";import{_ as M,a as w,o as p,c as D,b as g,f as O,d as h,u as n,e as I,C as T,p as A,t as q,I as W,r as S,w as P,J as V,K as x,Q as J,F as B,j as $,X as L,v as E,A as K,k as X,B as Z,G as ee,M as te}from"./index-BGi8GpGv.js";import{a as y}from"./index-CJtyaUy2.js";import{u as le,G as ae}from"./index-DQhdp3Mo.js";import{P as re}from"./index-CBHngC_A.js";import{c as se,D as ue}from"./metaHelper-B8_iLp7n.js";import{u as oe,C as H,a as ne}from"./Content-CKsiGma2.js";import"./useForm-D-1CqejB.js";const ie={class:"title-button-group"},ce={__name:"Title",setup(c){const{addQuery:t}=b();return(e,l)=>{const r=w("Button");return p(),D(n(Q),{title:"관리자 등급 설정"},{rightArea:g(()=>[O("div",ie,[h(r,{outlined:"",width:111,size:"x-small",title:"관리자 등급 설정",onClick:l[0]||(l[0]=u=>n(t)({view:"add"}))})])]),_:1})}}},de=M(ce,[["__scopeId","data-v-2eb4d75d"]]),me={class:"toolbar-wrapper"},ve={class:"right-area"},pe={__name:"Toolbar",setup(c){return(t,e)=>{const l=w("Button");return p(),I("div",me,[e[0]||(e[0]=O("div",{class:"left-area"},null,-1)),O("div",ve,[h(l,{color:"green",size:"x-small",title:"다운로드"}),h(n(re))])])}}},_e=M(pe,[["__scopeId","data-v-bd7b4517"]]),fe={__name:"Alert",props:{modelValue:{},modelModifiers:{},type:{},typeModifiers:{}},emits:["update:modelValue","update:type"],setup(c){const t=T(c,"modelValue"),e=T(c,"type"),l=A(()=>e.value==="refresh"?"새로고침을 진행하시겠습니까?":e.value==="refresh_complete"?"DID 새로고침 완료":e.value==="restart"?"재시작을 진행하시겠습니까?":e.value==="restart_complete"?"DID 재시작 완료":e.value==="update"?"업데이트를 진행하시겠습니까?":e.value==="update_complete"?"DID 업데이트 완료":e.value==="on"?"기기 사용을 ON 하시겠습니까?":e.value==="on_complete"?"기기 사용 ON 완료":e.value==="off"?"기기 사용을 OFF 하시겠습니까?":e.value==="off_complete"?"기기 사용 OFF 완료":e.value==="finish"?"기기를 종료하시겠습니까?":e.value==="finish_complete"?"기기 종료 완료":""),r=A(()=>e.value==="refresh"?`새로고침을 할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="refresh_complete"?"DID 새로고침이 완료됐습니다.":e.value==="restart"?`재시작을 할 경우,
기기에 콘텐츠 노출이 멈추게 됩니다.`:e.value==="restart_complete"?`DID 재시작이 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="update"?`업데이트를 진행할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="update_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="on"?`기기 사용을 ON 하게 되면,
기기가 활성화됩니다.`:e.value==="on_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="off"?`기기 사용을 OFF 하게 되면,
기기 화면이 대기 상태로 전환되게 됩니다.`:e.value==="off_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="finish"?`기기 사용을 OFF 하게 되면,
기기가 꺼지게 됩니다.`:e.value==="finish_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:""),u=A(()=>{var m;return!((m=e.value)!=null&&m.endsWith("_complete"))}),v=A(()=>{var m;return(m=e.value)==null?void 0:m.endsWith("_complete")});function _(){e.value=`${e.value}_complete`}return(m,o)=>{const s=w("Alert",!0);return p(),D(s,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),title:l.value,message:r.value,showCancel:u.value,confirmClickClose:v.value,"onClick:confirm":_},null,8,["modelValue","title","message","showCancel","confirmClickClose"])}}},he={class:"text-truncate"},Ae={__name:"Roles",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(c){const t=c,e=A(()=>{var r;return(((r=t.column)==null?void 0:r.items)||[]).reduce((u,{value:v,title:_,children:m})=>(u[v]=_,m==null||m.forEach(({value:o,title:s})=>u[o]=s),u),{})}),l=A(()=>{var u;const r=(u=t.item)==null?void 0:u[t.column.key];return Array.isArray(r)?r.map(v=>e.value[v]).join(" / "):""});return(r,u)=>(p(),I("div",he,q(l.value),1))}},De={idx:{column:{title:"NO",type:"text"}},name:{column:{title:"등급 명",type:"text"},form:{row:1,required:!0,autoFocus:!0,component:"input",class:"w-318",label:"등급 명",placeholder:"등급 명을 입력해 주세요.",errorMessages:{error:"",require:""}}},roles:{column:{title:"메뉴 별 권한",type:"text"},form:{row:2,required:!0,component:"custom",label:"메뉴 별 권한 (복수 선택 가능)",placeholder:"",errorMessages:{error:"",require:""}},common:{items:[{title:"전체",value:"MASTER"},{title:"홈 (대시보드) 전체",value:"DASHBOARD_SALES,DASHBOARD_PARTNER_DEVICE,DASHBOARD_AD,DASHBOARD_DEVICE",children:[{title:"매출 현황",value:"DASHBOARD_SALES"},{title:"제휴처 수 / 기기 수",value:"DASHBOARD_PARTNER_DEVICE"},{title:"광고 현황",value:"DASHBOARD_AD"},{title:"기기 현황",value:"DASHBOARD_DEVICE"}]},{title:"DID 관리 전체",value:"DEVICE,DEVICE_TYPE,PARTNER,CONTENT",children:[{title:"기기 관리",value:"DEVICE"},{title:"기기 유형 등록",value:"DEVICE_TYPE"},{title:"제휴처 관리",value:"PARTNER"},{title:"일반 콘텐츠 관리",value:"CONTENT"}]},{title:"광고 관리 전체",value:"CAMPAIGN,CAMPAIGN_OPERATION,VIDEO_SCHEDULE",children:[{title:"캠페인 관리",value:"CAMPAIGN"},{title:"캠페인 운영 관리",value:"CAMPAIGN_OPERATION"},{title:"영상 스케쥴 관리",value:"VIDEO_SCHEDULE"}]},{title:"운영 관리 전체",value:"MEMBER,COMPANY,NOTICE,FAQ,NOTIFICATION,EMAIL,INQUIRY",children:[{title:"사용자 관리",value:"MEMBER"},{title:"대행사 관리",value:"COMPANY"},{title:"공지사항 관리",value:"NOTICE"},{title:"FAQ 관리",value:"FAQ"},{title:"알림 관리",value:"NOTIFICATION"},{title:"이메일 관리",value:"EMAIL"},{title:"문의사항",value:"INQUIRY"}]},{title:"매출 관리 전체",value:"SALES_REPORT,COMMISSION_PAYMENT,PAYMENT_HISTORY,REFUND_MANAGEMENT",children:[{title:"매출 리포트",value:"SALES_REPORT"},{title:"수수료 결제 관리",value:"COMMISSION_PAYMENT"},{title:"결제 내역",value:"PAYMENT_HISTORY"},{title:"취소 / 환불 관리",value:"REFUND_MANAGEMENT"}]},{title:"관리자 권한 관리 전체",value:"ADMIN,ADMIN_READONLY",children:[{title:"관리자 등급 설정",value:"ADMIN"},{title:"관리자 리스트",value:"ADMIN_READONLY"}]}]}},detailView:{column:{title:"상세보기",type:"link"}}},Ce=["idx","name","roles","detailView"],ge=["name","roles"],Ee=se(De,Ce,ge);class N extends ue{constructor(t){super(t),this.detailView="상세보기"}toRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>e==="roles"?{...t,[e]:this[e].split(",")}:{...t,[e]:this[e]},{})}toPutRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>e==="roles"?{...t,[e]:this[e].split(",")}:{...t,[e]:this[e]},{})}}F(N,"metaData",Ee);const Ie={__name:"index",setup(c){const{page:t,size:e,totalPage:l,loading:r,items:u,addQuery:v}=le(m),_=N.toColumnHeaders();async function m(){var f;r.value=!0,u.value.length=0;const s={page:t.value,size:e.value},a=await y("admin-group").getPage(s),{result:i,body:d}=a||{};i.httpStatus===200&&(r.value=!1,(f=d==null?void 0:d.data)==null||f.forEach(C=>u.value.push(new N(C))),l.value=(d==null?void 0:d.totalPage)||0)}async function o({item:s,column:a,newValue:i}){if(a.type==="link")return v({view:"detail",id:s.idx})}return(s,a)=>(p(),D(n(ae),{page:n(t),items:n(u),loading:n(r),totalPage:n(l),columnHeaders:n(_),"onClick:cell":o,"onClick:page":a[0]||(a[0]=i=>n(v)({page:i}))},{toolbar:g(()=>[h(_e)]),alert:g(()=>[h(fe)]),roles:g(({item:i,column:d})=>[h(Ae,{item:i,column:d},null,8,["item","column"])]),_:1},8,["page","items","loading","totalPage","columnHeaders"]))}},Oe=M(Ie,[["__scopeId","data-v-cf093811"]]),Ne={__name:"index",setup(c){return(t,e)=>(p(),D(n(z),null,{title:g(()=>[h(de)]),content:g(()=>[h(n(Oe))]),_:1}))}};function j(c){const t=N.toFormFields(),{values:e,errors:l,getFields:r,validateFields:u}=oe(t);return{fields:r([],c),values:e,errors:l,validateFields:u}}const be={class:"roles-container"},Re={class:"roles-wrapper"},ye={__name:"Roles",props:W({items:{type:Array,default:()=>[]}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const t=T(c,"modelValue"),e=c,l=S({}),r=S({}),u=A(()=>e.items[0].value),v=o=>!!l.value[o];function _(o,s){o.forEach(a=>{l.value[a.value]=s,r.value[a.value]=s,Array.isArray(a.children)&&_(a.children,s)})}function m({value:o,checked:s}){if(l.value[o]=s,o===u.value||e.items.every(i=>i.value===u.value||l.value[i.value]))return _(e.items,s),r.value[u.value]=!1;const a=e.items.find(i=>i.value==o);if(a!=null&&a.children)return _(a.children,s);e.items.forEach(i=>{var d;(d=i==null?void 0:i.children)!=null&&d.every(f=>l.value[f.value])&&(l.value[i.value]=s,_(i.children,s))})}return P(l,o=>{if(o[u.value])return t.value=u.value;const s=[];e.items.forEach(a=>{if(a.value!==u.value){if(o[a.value])return s.push(a.value);a.children.forEach(i=>o[i.value]&&s.push(i.value))}}),t.value=s.join(",")},{deep:!0}),P(t,o=>{!Array.isArray(o)||!o.length||o.forEach(s=>m({value:s,checked:!0}))},{deep:!0,immediate:!0}),(o,s)=>(p(),I("div",be,[h(n(J),V(x(o.$attrs)),null,16),O("div",Re,[(p(!0),I(B,null,$(c.items,a=>(p(),I("div",{key:a.value,class:"item-row"},[h(n(L),{"return-object":"",label:a.title,value:a.value,disabled:r.value[a.value],"model-value":v(a.value),"onUpdate:modelValue":m},null,8,["label","value","disabled","model-value"]),(p(!0),I(B,null,$(a.children,i=>(p(),D(n(L),{"return-object":"",key:i.value,label:i.title,value:i.value,disabled:r.value[i.value],"model-value":v(i.value),"onUpdate:modelValue":m},null,8,["label","value","disabled","model-value"]))),128))]))),128))])]))}},Y=M(ye,[["__scopeId","data-v-cc3da4e1"]]),Me={__name:"Create",setup(c){const{showAlert:t}=E("alert"),{routeList:e}=b(),{fields:l,values:r,errors:u,validateFields:v}=j(),_=E("methods");return _.cancel=()=>K(r)?t("cancel"):e(),_.submit=()=>{if(!v())return t("missing");t("regist",async()=>{var s;const m=new N({...r}),o=await y("admin-group").create(m.toRequestBody());t(((s=o==null?void 0:o.result)==null?void 0:s.httpStatus)===200?"regist_complete":"missing")})},(m,o)=>(p(),D(H,{fields:n(l),values:n(r),errors:n(u)},{custom:g(s=>[h(Y,V(x(s)),null,16)]),_:1},8,["fields","values","errors"]))}},we={__name:"Detail",setup(c){const{showAlert:t}=E("alert"),e=E("footer-props"),{getQuery:l,routeList:r}=b(),{fields:u,values:v,errors:_,validateFields:m}=j(!0),o=A(()=>u.map(d=>d.map(f=>({...f})))),s=S(!1),a=S({});X(async()=>{var R,k;s.value=!0,e.disabledSubmit=!0;const d=await y("admin-group").getDetail((R=l())==null?void 0:R.id),{result:f,body:C}=d||{};f.httpStatus===200&&(a.value=Z(v,{...C}),a.value.roles=(((k=a.value)==null?void 0:k.roles)||[]).join(","),s.value=!1)}),P(v,()=>e.disabledSubmit=!ee(a.value,v));const i=E("methods");return i.cancel=()=>e.disabledSubmit?r():t("put_cancel"),i.submit2=()=>t("delete",async()=>{var f,C;const d=await y("admin-group").delete((f=l())==null?void 0:f.id);((C=d==null?void 0:d.result)==null?void 0:C.httpStatus)===200&&t("delete_complete")}),i.submit=()=>{if(!m())return t("missing");t("put",async()=>{var C,R;const d=new N({...v}),f=await y("admin-group").update((C=l())==null?void 0:C.id,d.toPutRequestBody());((R=f==null?void 0:f.result)==null?void 0:R.httpStatus)===200&&t("put_complete")})},(d,f)=>(p(),D(H,{isDetail:"",fields:o.value,values:n(v),errors:n(_)},{custom:g(C=>[h(Y,V(x(C)),null,16)]),_:1},8,["fields","values","errors"]))}},Se={class:"flex justify-between align-center"},Te={class:"button-group"},Pe={__name:"Footer",props:{isDetail:{type:Boolean,default:!1}},setup(c){const t=E("methods"),e=E("footer-props");return(l,r)=>{const u=w("Button");return p(),I("div",Se,[r[0]||(r[0]=O("div",null,null,-1)),O("div",Te,[h(u,{outlined:"",size:"medium",color:"neutral",width:55,title:c.isDetail?"목록":"취소",onClick:n(t).cancel},null,8,["title","onClick"]),c.isDetail?(p(),D(u,{key:0,title:"삭제",color:"red",size:"medium",width:55,onClick:n(t).submit2},null,8,["onClick"])):te("",!0),h(u,{size:"medium",color:"primary",width:55,title:c.isDetail?"수정":"등록",disabled:n(e).disabledSubmit,onClick:n(t).submit},null,8,["title","disabled","onClick"])])])}}},Ve=M(Pe,[["__scopeId","data-v-3e04ee21"]]),xe={__name:"Alert",setup(c){const{alertObj:t}=E("alert"),{routeList:e}=b(),l=A(()=>t.type),r=A(()=>l.value==="regist"?"관리자 등급을 생성하시겠습니까?":l.value==="regist_complete"?"관리자 등급 생성 완료":l.value==="cancel"?"관리자 등급 생성을 취소하시겠습니까?":l.value==="missing"?"잘못된 정보 또는 누락된 정보가 있습니다.":l.value==="put"?"관리자 등급을 수정하시겠습니까?":l.value==="put_complete"?"관리자 등급 수정 완료":l.value==="put_cancel"?"관리자 등급 수정을 취소하시겠습니까?":l.value==="delete"?"관리자 등급을 삭제하시겠습니까?":l.value==="delete_complete"?"관리자 등급 삭제 완료":""),u=A(()=>l.value==="regist"?`해당 관리자 등급 권한이
정확하게 체크되어 있나요?`:l.value==="regist_complete"?"관리자 등급 생성 완료됐습니다.":l.value==="cancel"?`관리자 등급 생성을 취소할 경우,
입력한 정보가 삭제됩니다.`:l.value==="missing"?"입력한 정보를 다시 한번 확인해주세요.":l.value==="put"?"메뉴별 권한을 정확하게 확인하셨나요?":l.value==="put_complete"?"관리자 등급 변경이 완료됐습니다.":l.value==="put_cancel"?`수정을 취소하면,
입력한 정보가 삭제됩니다.`:l.value==="delete"?`관리자 등급을 삭제하면
해당 등급에 할당된 사용자의 권한이 전체 삭제됩니다.`:l.value==="delete_complete"?"해당 관리자 등급이 삭제됐습니다.":""),v=A(()=>l.value==="missing"),_=A(()=>["regist","cancel","delete","put","put_cancel"].includes(l.value)),m=A(()=>l.value!=="regist"),o=A(()=>({cancel:e,regist:t["click:confirm"],regist_complete:e,delete:t["click:confirm"],delete_complete:e,put:t["click:confirm"],put_complete:e,put_cancel:e}));return(s,a)=>{const i=w("Alert",!0);return p(),D(i,{modelValue:n(t).show,"onUpdate:modelValue":a[0]||(a[0]=d=>n(t).show=d),title:r.value,error:v.value,message:u.value,showCancel:_.value,confirmClickClose:m.value,"onClick:confirm":o.value[l.value]},null,8,["modelValue","title","error","message","showCancel","confirmClickClose","onClick:confirm"])}}},ke={__name:"index",setup(c){const{isDetail:t}=b();return(e,l)=>(p(),D(n(ne),{title:n(t)?"관리자 등급 상세보기":"관리자 등급 생성"},{content:g(()=>[n(t)?(p(),D(we,{key:0})):(p(),D(Me,{key:1}))]),footer:g(()=>[h(Ve,{isDetail:n(t)},null,8,["isDetail"])]),alert:g(()=>[h(xe)]),_:1},8,["title"]))}},ze={__name:"index",setup(c){const{getQuery:t}=b();return(e,l)=>{var r;return["add","detail"].includes((r=n(t)())==null?void 0:r.view)?(p(),D(n(ke),{key:0})):(p(),D(n(Ne),{key:1}))}}};export{ze as default};
