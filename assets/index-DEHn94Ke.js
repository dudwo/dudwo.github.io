var T=Object.defineProperty;var N=(s,t,e)=>t in s?T(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var O=(s,t,e)=>N(s,typeof t!="symbol"?t+"":t,e);import{u as F}from"./useCustomRouter-CiU2rkZM.js";import{T as R,L as E}from"./index-Dm8pkpH6.js";import{_ as q,a as Q,o as p,c as h,b as y,f as k,d as w,u as l,e as I,C as P,p as v,t as j,D as V,v as A,A as z,r as M,k as G,B as L,w as U,G as Y,M as H}from"./index-BGi8GpGv.js";import{a as D}from"./index-CJtyaUy2.js";import{u as W,G as J}from"./index-DQhdp3Mo.js";import{P as K}from"./index-CBHngC_A.js";import{c as X,D as Z}from"./metaHelper-B8_iLp7n.js";import{u as ee,C as S,a as te}from"./Content-CKsiGma2.js";import"./useForm-D-1CqejB.js";const re={class:"title-button-group"},le={__name:"Title",setup(s){const{addQuery:t}=F();return(e,r)=>{const a=Q("Button");return p(),h(l(R),{title:"FAQ 관리"},{rightArea:y(()=>[k("div",re,[w(a,{outlined:"",width:78,size:"x-small",title:"FAQ 등록",onClick:r[0]||(r[0]=n=>l(t)({view:"add"}))})])]),_:1})}}},se=q(le,[["__scopeId","data-v-27dd5487"]]),ae={class:"toolbar-wrapper"},oe={class:"right-area"},ne={__name:"Toolbar",setup(s){return(t,e)=>(p(),I("div",ae,[e[0]||(e[0]=k("div",{class:"left-area"},null,-1)),k("div",oe,[w(l(K))])]))}},ue=q(ne,[["__scopeId","data-v-c591f881"]]),ie={__name:"Alert",props:{modelValue:{},modelModifiers:{},type:{},typeModifiers:{}},emits:["update:modelValue","update:type"],setup(s){const t=P(s,"modelValue"),e=P(s,"type"),r=v(()=>e.value==="refresh"?"새로고침을 진행하시겠습니까?":e.value==="refresh_complete"?"DID 새로고침 완료":e.value==="restart"?"재시작을 진행하시겠습니까?":e.value==="restart_complete"?"DID 재시작 완료":e.value==="update"?"업데이트를 진행하시겠습니까?":e.value==="update_complete"?"DID 업데이트 완료":e.value==="on"?"기기 사용을 ON 하시겠습니까?":e.value==="on_complete"?"기기 사용 ON 완료":e.value==="off"?"기기 사용을 OFF 하시겠습니까?":e.value==="off_complete"?"기기 사용 OFF 완료":e.value==="finish"?"기기를 종료하시겠습니까?":e.value==="finish_complete"?"기기 종료 완료":""),a=v(()=>e.value==="refresh"?`새로고침을 할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="refresh_complete"?"DID 새로고침이 완료됐습니다.":e.value==="restart"?`재시작을 할 경우,
기기에 콘텐츠 노출이 멈추게 됩니다.`:e.value==="restart_complete"?`DID 재시작이 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="update"?`업데이트를 진행할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="update_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="on"?`기기 사용을 ON 하게 되면,
기기가 활성화됩니다.`:e.value==="on_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="off"?`기기 사용을 OFF 하게 되면,
기기 화면이 대기 상태로 전환되게 됩니다.`:e.value==="off_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="finish"?`기기 사용을 OFF 하게 되면,
기기가 꺼지게 됩니다.`:e.value==="finish_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:""),n=v(()=>{var f;return!((f=e.value)!=null&&f.endsWith("_complete"))}),m=v(()=>{var f;return(f=e.value)==null?void 0:f.endsWith("_complete")});function C(){e.value=`${e.value}_complete`}return(f,_)=>{const i=Q("Alert",!0);return p(),h(i,{modelValue:t.value,"onUpdate:modelValue":_[0]||(_[0]=u=>t.value=u),title:r.value,message:a.value,showCancel:n.value,confirmClickClose:m.value,"onClick:confirm":C},null,8,["modelValue","title","message","showCancel","confirmClickClose"])}}},ce={__name:"FAQType",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(s){const t=s,e=v(()=>{var r;return((r=t.column.items.find(a=>a.value===t.item[t.column.key]))==null?void 0:r.title)||"-"});return(r,a)=>(p(),I("div",null,j(e.value),1))}},de={idx:{column:{title:"NO",type:"text"}},title:{column:{title:"제목",type:"text"},form:{row:1,required:!0,autoFocus:!0,component:"input",label:"제목",class:"w-318",placeholder:"제목을 입력해 주세요.",errorMessages:{error:"",require:""}}},faqType:{column:{title:"유형",type:"text"},form:{row:1,required:!0,component:"dropdown",label:"유형",class:"w-318",placeholder:"유형을 선택해 주세요.",errorMessages:{error:"",require:""}},common:{items:[{title:"결제",value:"PAYMENT"},{title:"이용방법",value:"USAGE"},{title:"취소/환불",value:"REFUND"},{title:"대행사/랩사",value:"AGENCY"},{title:"서비스 문의",value:"SERVICE"},{title:"제휴 문의",value:"PARTNERSHIP"}]}},content:{form:{row:2,required:!0,component:"editor",label:"본문 내용",placeholder:"내용을 입력해 주세요.",errorMessages:{error:"",require:""}}},publishAt:{form:{row:3,required:!0,component:"datePicker",class:"w-318",label:"게재일",placeholder:"게재일을 선택해 주세요.",errorMessages:{error:"",require:""}}},used:{column:{title:"사용 여부",type:"switch"},form:{row:3,required:!0,component:"switch",class:"w-318",label:"사용 여부",placeholder:"",errorMessages:{error:"",require:""}}},createdAt:{column:{title:"등록일",type:"date"}},updatedAt:{column:{title:"수정일",type:"date"}},detailView:{column:{title:"상세보기",type:"link"}}},pe=["idx","title","faqType","used","createdAt","updatedAt","detailView"],me=["title","faqType","content","publishAt","used"],fe=X(de,pe,me);class b extends Z{constructor(t){super(t),this.detailView="상세보기"}toRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>["publishAt"].includes(e)?{...t,[e]:V(this[e]).valueOf()}:{...t,[e]:this[e]},{})}toPutRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>["publishAt"].includes(e)?{...t,[e]:V(this[e]).valueOf()}:{...t,[e]:this[e]},{})}}O(b,"metaData",fe);const _e={__name:"index",setup(s){const{page:t,size:e,totalPage:r,loading:a,items:n,addQuery:m}=W(f),C=b.toColumnHeaders();async function f(){var c;const i={page:t.value,size:e.value};a.value=!0,n.value.length=0;const u=await D("faq").getPage(i),{result:g,body:o}=u||{};g.httpStatus===200&&(a.value=!1,(c=o==null?void 0:o.data)==null||c.forEach(d=>n.value.push(new b(d))),r.value=(o==null?void 0:o.totalPage)||0)}async function _({item:i,column:u,newValue:g}){var c;if(n.value.findIndex(d=>d.id===i.id)!==-1){if(u.type==="link")return m({view:"detail",id:i.idx});if(u.type==="switch"){const d=await D("faq").partialUpdate(i.idx,{[u.key]:!i[u.key]});((c=d==null?void 0:d.result)==null?void 0:c.httpStatus)===200&&(i[u.key]=!i[u.key])}}}return(i,u)=>(p(),h(l(J),{page:l(t),items:l(n),loading:l(a),totalPage:l(r),columnHeaders:l(C),"onClick:cell":_,"onClick:page":u[0]||(u[0]=g=>l(m)({page:g}))},{toolbar:y(()=>[w(ue)]),alert:y(()=>[w(ie)]),faqType:y(({item:g,column:o})=>[w(ce,{item:g,column:o},null,8,["item","column"])]),_:1},8,["page","items","loading","totalPage","columnHeaders"]))}},ve=q(_e,[["__scopeId","data-v-0a21016c"]]),he={__name:"index",setup(s){return(t,e)=>(p(),h(l(E),null,{title:y(()=>[w(se)]),content:y(()=>[w(l(ve))]),_:1}))}};function B(s){const t=b.toFormFields(),{values:e,errors:r,getFields:a,validateFields:n}=ee(t);return e.used=!0,{fields:a([],s),values:e,errors:r,validateFields:n}}const ge={__name:"Create",setup(s){const{showAlert:t}=A("alert"),{routeList:e}=F(),{fields:r,values:a,errors:n,validateFields:m}=B(),C=A("methods");return C.cancel=()=>z(a)?t("cancel"):e(),C.submit=()=>{if(!m())return t("missing");t("regist",async()=>{var i;const f=new b({...a}),_=await D("faq").create(f.toRequestBody());t(((i=_==null?void 0:_.result)==null?void 0:i.httpStatus)===200?"regist_complete":"missing")})},(f,_)=>(p(),h(S,{fields:l(r),values:l(a),errors:l(n)},null,8,["fields","values","errors"]))}},we={__name:"Detail",setup(s){const{showAlert:t}=A("alert"),e=A("footer-props"),{getQuery:r,routeList:a}=F(),{fields:n,values:m,errors:C,validateFields:f}=B(!0),_=v(()=>n.map(o=>o.map(c=>({...c})))),i=M(!1),u=M({});G(async()=>{var $;i.value=!0,e.disabledSubmit=!0;const o=await D("faq").getDetail(($=r())==null?void 0:$.id),{result:c,body:d}=o||{};if(c.httpStatus!==200)return;const x=V(d.publishAt).format("YYYY-MM-DD");u.value=L(m,{...d,publishAt:x}),i.value=!1}),U(m,()=>e.disabledSubmit=!Y(u.value,m));const g=A("methods");return g.cancel=()=>e.disabledSubmit?a():t("put_cancel"),g.delete=()=>t("delete",async()=>{var c,d;const o=await D("faq").delete((c=r())==null?void 0:c.id);((d=o==null?void 0:o.result)==null?void 0:d.httpStatus)===200&&t("delete_complete")}),g.submit=()=>{if(!f())return t("missing");t("put",async()=>{var d,x;const o=new b({...m}),c=await D("faq").update((d=r())==null?void 0:d.id,o.toPutRequestBody());((x=c==null?void 0:c.result)==null?void 0:x.httpStatus)===200&&t("put_complete")})},(o,c)=>(p(),h(S,{isDetail:"",fields:_.value,values:l(m),errors:l(C)},null,8,["fields","values","errors"]))}},Ce={class:"flex justify-between align-center"},ye={class:"button-group"},Ae={__name:"Footer",props:{isDetail:{type:Boolean,default:!1}},setup(s){const t=A("methods"),e=A("footer-props");return(r,a)=>{const n=Q("Button");return p(),I("div",Ce,[a[0]||(a[0]=k("div",null,null,-1)),k("div",ye,[w(n,{outlined:"",width:55,title:s.isDetail?"목록":"취소",size:"medium",color:"neutral",onClick:l(t).cancel},null,8,["title","onClick"]),s.isDetail?(p(),h(n,{key:0,size:"medium",title:"삭제",color:"red",width:55,onClick:l(t).delete},null,8,["onClick"])):H("",!0),w(n,{size:"medium",color:"primary",width:55,title:s.isDetail?"수정":"등록",disabled:l(e).disabledSubmit,onClick:l(t).submit},null,8,["title","disabled","onClick"])])])}}},De=q(Ae,[["__scopeId","data-v-37b6c7bb"]]),be={__name:"Alert",setup(s){const{alertObj:t}=A("alert"),{routeList:e}=F(),r=v(()=>t.type),a=v(()=>r.value==="regist"?"FAQ를 등록하시겠습니까?":r.value==="regist_complete"?"FAQ 등록 완료":r.value==="cancel"?"FAQ 등록을 취소하시겠습니까?":r.value==="missing"?"잘못된 정보 또는 누락된 정보가 있습니다.":r.value==="put"?"FAQ를 수정하시겠습니까?":r.value==="put_complete"?"FAQ 수정 완료":r.value==="put_cancel"?"FAQ 수정을 취소하시겠습니까?":r.value==="delete"?"FAQ를 삭제하시겠습니까?":r.value==="delete_complete"?"FAQ 삭제 완료":""),n=v(()=>r.value==="regist_complete"?"FAQ 등록이 완료됐습니다.":r.value==="cancel"?`FAQ 등록을 취소할 경우,
입력한 정보가 삭제됩니다.`:r.value==="missing"?"입력한 정보를 다시 한번 확인해주세요.":r.value==="put"?"수정할 내용을 충분히 확인하셨나요?":r.value==="put_complete"?"FAQ 수정 완료됐습니다.":r.value==="put_cancel"?`수정을 취소하면,
입력한 정보가 삭제됩니다.`:r.value==="delete"?`FAQ를 삭제하면
사용자 화면에서 보이지 않습니다.`:r.value==="delete_complete"?"FAQ 삭제 완료했습니다.":""),m=v(()=>r.value==="missing"),C=v(()=>["regist","cancel","delete","put","put_cancel"].includes(r.value)),f=v(()=>!["regist","put","delete"].includes(r.value)),_=v(()=>({cancel:e,regist:t["click:confirm"],regist_complete:e,delete:t["click:confirm"],delete_complete:e,put:t["click:confirm"],put_complete:e,put_cancel:e}));return(i,u)=>{const g=Q("Alert",!0);return p(),h(g,{modelValue:l(t).show,"onUpdate:modelValue":u[0]||(u[0]=o=>l(t).show=o),title:a.value,error:m.value,message:n.value,showCancel:C.value,confirmClickClose:f.value,"onClick:confirm":_.value[r.value]},null,8,["modelValue","title","error","message","showCancel","confirmClickClose","onClick:confirm"])}}},Fe={__name:"index",setup(s){const{isDetail:t}=F();return(e,r)=>(p(),h(l(te),{title:l(t)?"FAQ 상세 내용":"FAQ 등록"},{content:y(()=>[l(t)?(p(),h(we,{key:0})):(p(),h(ge,{key:1}))]),footer:y(()=>[w(De,{isDetail:l(t)},null,8,["isDetail"])]),alert:y(()=>[w(be)]),_:1},8,["title"]))}},Se={__name:"index",setup(s){const{getQuery:t}=F();return(e,r)=>{var a;return["add","detail"].includes((a=l(t)())==null?void 0:a.view)?(p(),h(l(Fe),{key:0})):(p(),h(l(he),{key:1}))}}};export{Se as default};
