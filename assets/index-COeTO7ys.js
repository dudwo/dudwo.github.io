var Q=Object.defineProperty;var j=(s,t,e)=>t in s?Q(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var O=(s,t,e)=>j(s,typeof t!="symbol"?t+"":t,e);import{u as k}from"./useCustomRouter-CiU2rkZM.js";import{T as E,L as Y}from"./index-Dm8pkpH6.js";import{_ as q,a as I,o as c,c as h,b as D,f as B,d as _,u as a,e as M,C as A,p as f,E as U,v as b,k as z,A as W,J as L,K as N,Q as J,w as S,r as T,B as K,G as X,M as Z}from"./index-BGi8GpGv.js";import{a as P}from"./index-CJtyaUy2.js";import{u as ee,G as te}from"./index-DQhdp3Mo.js";import{P as re}from"./index-CBHngC_A.js";import{c as ae,D as oe}from"./metaHelper-B8_iLp7n.js";import{u as se,C as R,a as ne}from"./Content-CKsiGma2.js";import{u as G}from"./useDropdownOptions-Bht9kext.js";import"./useForm-D-1CqejB.js";const le={class:"title-button-group"},ie={__name:"Title",setup(s){const{addQuery:t}=k();return(e,r)=>{const o=I("Button");return c(),h(a(E),{title:"관리자 리스트"},{rightArea:D(()=>[B("div",le,[_(o,{outlined:"",width:87,size:"x-small",title:"관리자 생성",onClick:r[0]||(r[0]=n=>a(t)({view:"add"}))})])]),_:1})}}},ue=q(ie,[["__scopeId","data-v-04579350"]]),ce={class:"toolbar-wrapper"},me={class:"right-area"},de={__name:"Toolbar",setup(s){return(t,e)=>{const r=I("Button");return c(),M("div",ce,[e[0]||(e[0]=B("div",{class:"left-area"},null,-1)),B("div",me,[_(r,{color:"green",size:"x-small",title:"다운로드"}),_(a(re))])])}}},pe=q(de,[["__scopeId","data-v-238b02a4"]]),fe={__name:"Alert",props:{modelValue:{},modelModifiers:{},type:{},typeModifiers:{}},emits:["update:modelValue","update:type"],setup(s){const t=A(s,"modelValue"),e=A(s,"type"),r=f(()=>e.value==="refresh"?"새로고침을 진행하시겠습니까?":e.value==="refresh_complete"?"DID 새로고침 완료":e.value==="restart"?"재시작을 진행하시겠습니까?":e.value==="restart_complete"?"DID 재시작 완료":e.value==="update"?"업데이트를 진행하시겠습니까?":e.value==="update_complete"?"DID 업데이트 완료":e.value==="on"?"기기 사용을 ON 하시겠습니까?":e.value==="on_complete"?"기기 사용 ON 완료":e.value==="off"?"기기 사용을 OFF 하시겠습니까?":e.value==="off_complete"?"기기 사용 OFF 완료":e.value==="finish"?"기기를 종료하시겠습니까?":e.value==="finish_complete"?"기기 종료 완료":""),o=f(()=>e.value==="refresh"?`새로고침을 할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="refresh_complete"?"DID 새로고침이 완료됐습니다.":e.value==="restart"?`재시작을 할 경우,
기기에 콘텐츠 노출이 멈추게 됩니다.`:e.value==="restart_complete"?`DID 재시작이 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="update"?`업데이트를 진행할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="update_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="on"?`기기 사용을 ON 하게 되면,
기기가 활성화됩니다.`:e.value==="on_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="off"?`기기 사용을 OFF 하게 되면,
기기 화면이 대기 상태로 전환되게 됩니다.`:e.value==="off_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="finish"?`기기 사용을 OFF 하게 되면,
기기가 꺼지게 됩니다.`:e.value==="finish_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:""),n=f(()=>{var l;return!((l=e.value)!=null&&l.endsWith("_complete"))}),i=f(()=>{var l;return(l=e.value)==null?void 0:l.endsWith("_complete")});function C(){e.value=`${e.value}_complete`}return(l,w)=>{const m=I("Alert",!0);return c(),h(m,{modelValue:t.value,"onUpdate:modelValue":w[0]||(w[0]=u=>t.value=u),title:r.value,message:o.value,showCancel:n.value,confirmClickClose:i.value,"onClick:confirm":C},null,8,["modelValue","title","message","showCancel","confirmClickClose"])}}},_e={idx:{column:{title:"NO",type:"text"}},name:{column:{title:"이름",type:"text"},form:{row:1,required:!0,component:"input",class:"w-318",label:"이름",placeholder:"이름을 입력해 주세요.",errorMessages:{error:"",require:""}}},email:{column:{title:"이메일 (아이디)",type:"text"},form:{row:1,required:!0,autoFocus:!0,component:"input",class:"w-318",label:"이메일 (아이디)",placeholder:"이메일 주소를 입력해 주세요.",errorMessages:{error:"",require:""}}},groupName:{column:{title:"등급",type:"text"}},adminGroupIdx:{form:{row:2,required:!0,component:"dropdown",class:"w-318",label:"관리자 등급",placeholder:"관리자 등급을 선택해 주세요.",errorMessages:{error:"",require:""}}},adminTeam:{column:{title:"팀",type:"text"},form:{row:2,required:!0,component:"input",class:"w-318",label:"소속팀",placeholder:"소속팀을 입력해 주세요.",errorMessages:{error:"",require:""}}},phone:{form:{row:3,required:!0,component:"input",type:"number",class:"w-318",label:"연락처",placeholder:"숫자만 입력해 주세요.",errorMessages:{error:"",require:""}}},passwordChange:{form:{row:3,required:!0,component:"custom",class:"w-318",label:"비밀번호 재설정",placeholder:"",errorMessages:{error:"",require:""}}},lastLoginAt:{column:{title:"최근 로그인",type:"date",format:"YYYY-MM-DD HH:mm"}},detailView:{column:{title:"상세보기",type:"link"}}},ve=["idx","name","email","groupName","adminTeam","lastLoginAt","detailView"],he=["email","name","adminGroupIdx","adminTeam","phone","passwordChange"],ge=ae(_e,ve,he);class F extends oe{constructor(t){super(t),this.detailView="상세보기"}toRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>({...t,[e]:this[e]}),{})}toPutRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>["email","name"].includes(e)?t:{...t,[e]:this[e]},{})}}O(F,"metaData",ge);const we={__name:"index",setup(s){const{page:t,size:e,totalPage:r,loading:o,items:n,addQuery:i}=ee(l),C=F.toColumnHeaders();async function l(){var x;o.value=!0,n.value.length=0;const m={page:t.value,size:e.value},u=await P("admin").getPage(m),{result:v,body:d}=u||{};v.httpStatus===200&&(o.value=!1,(x=d==null?void 0:d.data)==null||x.forEach($=>n.value.push(new F($))),r.value=(d==null?void 0:d.totalPage)||0)}async function w({item:m,column:u,newValue:v}){if(u.type==="link")return i({view:"detail",id:m.idx})}return(m,u)=>(c(),h(a(te),{page:a(t),items:a(n),loading:a(o),totalPage:a(r),columnHeaders:a(C),"onClick:cell":w,"onClick:page":u[0]||(u[0]=v=>a(i)({page:v}))},{toolbar:D(()=>[_(pe)]),alert:D(()=>[_(fe)]),_:1},8,["page","items","loading","totalPage","columnHeaders"]))}},Ce=q(we,[["__scopeId","data-v-55adc517"]]),ye={__name:"index",setup(s){return(t,e)=>(c(),h(a(Y),null,{title:D(()=>[_(ue)]),content:D(()=>[_(a(Ce))]),_:1}))}};function H(s){const t=F.toFormFields(),{values:e,errors:r,changeRule:o,getFields:n,validateFields:i}=se(t);return o("email",m=>!m||U(m)?"":"올바른 이메일 형식이 아닙니다."),{fields:n(["passwordChange"],s),values:e,errors:r,validateFields:()=>i(["passwordChange"])}}const De={__name:"Create",setup(s){const{showAlert:t}=b("alert"),{routeList:e}=k(),{fields:r,values:o,errors:n,validateFields:i}=H(),{options:C,fetchOptions:l}=G(),w=f(()=>({adminGroupIdx:C.value}));z(()=>l("admin-group"));const m=b("methods");return m.cancel=()=>W(o)?t("cancel"):e(),m.submit=()=>{if(!i())return t("missing");t("regist",async()=>{var d;const u=new F({...o}),v=await P("admin").create(u.toRequestBody());t(((d=v==null?void 0:v.result)==null?void 0:d.httpStatus)===200?"regist_complete":"missing")})},(u,v)=>(c(),h(R,{fields:a(r),values:a(o),errors:a(n),items:w.value},null,8,["fields","values","errors","items"]))}},be={class:"password-change-wrapper"},ke={__name:"PasswordChange",setup(s){const{showAlert:t}=b("alert"),{getQuery:e}=k();async function r(){var n,i;const o=await P("admin").changePassword((n=e())==null?void 0:n.id);((i=o==null?void 0:o.result)==null?void 0:i.httpStatus)===200&&t("changePassword")}return(o,n)=>{const i=I("Button");return c(),M("div",be,[_(a(J),L(N(o.$attrs)),null,16),_(i,{outlined:"",title:"비밀번호 재설정 메일 발송",width:166,onClick:r})])}}},xe=q(ke,[["__scopeId","data-v-b75be993"]]),Pe={__name:"Detail",setup(s){const{showAlert:t}=b("alert"),e=b("footer-props"),{getQuery:r,routeList:o}=k(),{options:n,fetchOptions:i}=G(),{fields:C,values:l,errors:w,validateFields:m}=H(!0),u=f(()=>({adminGroupIdx:n.value})),v=f(()=>C.map(g=>g.map(p=>({...p,disabled:["name","email"].includes(p.key)}))));S(()=>l.paymentMethod,g=>{const p=g==="PREPAID";l.paymentDay=p?"":x.value.paymentDay});const d=T(!1),x=T({});z(async()=>{var V;i("admin-group"),d.value=!0,e.disabledSubmit=!0;const g=await P("admin").getDetail((V=r())==null?void 0:V.id),{result:p,body:y}=g||{};p.httpStatus===200&&(x.value=K(l,{...y}),d.value=!1)}),S(l,()=>e.disabledSubmit=!X(x.value,l));const $=b("methods");return $.cancel=()=>e.disabledSubmit?o():t("put_cancel"),$.submit2=()=>t("delete",async()=>{var p,y;const g=await P("admin").delete((p=r())==null?void 0:p.id);((y=g==null?void 0:g.result)==null?void 0:y.httpStatus)===200&&t("delete_complete")}),$.submit=()=>{if(!m())return t("missing");t("put",async()=>{var y,V;const g=new F({...l}),p=await P("admin").update((y=r())==null?void 0:y.id,g.toPutRequestBody());((V=p==null?void 0:p.result)==null?void 0:V.httpStatus)===200&&t("put_complete")})},(g,p)=>(c(),h(R,{isDetail:"",fields:v.value,values:a(l),errors:a(w),items:u.value},{custom:D(y=>[_(xe,L(N(y)),null,16)]),_:1},8,["fields","values","errors","items"]))}},Fe={class:"flex justify-between align-center"},Ie={class:"button-group"},$e={__name:"Footer",props:{isDetail:{type:Boolean,default:!1}},setup(s){const t=b("methods"),e=b("footer-props");return(r,o)=>{const n=I("Button");return c(),M("div",Fe,[o[0]||(o[0]=B("div",null,null,-1)),B("div",Ie,[_(n,{outlined:"",size:"medium",color:"neutral",width:55,title:s.isDetail?"목록":"취소",onClick:a(t).cancel},null,8,["title","onClick"]),s.isDetail?(c(),h(n,{key:0,title:"삭제",color:"red",size:"medium",width:55,onClick:a(t).submit2},null,8,["onClick"])):Z("",!0),_(n,{size:"medium",color:"primary",width:55,title:s.isDetail?"수정":"등록",disabled:a(e).disabledSubmit,onClick:a(t).submit},null,8,["title","disabled","onClick"])])])}}},Ve=q($e,[["__scopeId","data-v-3d019133"]]),Be={__name:"Alert",setup(s){const{alertObj:t}=b("alert"),{routeList:e}=k(),r=f(()=>t.type),o=f(()=>r.value==="regist"?"관리자를 생성하시겠습니까?":r.value==="regist_complete"?"관리자 생성 완료":r.value==="cancel"?"관리자 생성을 취소하시겠습니까?":r.value==="missing"?"잘못된 정보 또는 누락된 정보가 있습니다.":r.value==="put"?"관리자 정보를 수정하시겠습니까?":r.value==="put_complete"?"관리자 정보 수정 완료":r.value==="put_cancel"?"관리자 수정을 취소하시겠습니까?":r.value==="delete"?"관리자를 삭제하시겠습니까?":r.value==="delete_complete"?"관리자 삭제 완료":r.value==="changePassword"?"비밀번호 재설정 메일 발송 완료":""),n=f(()=>r.value==="regist"?"관리자 정보가 정확하게 입력됐나요?":r.value==="regist_complete"?"관리자 생성 완료됐습니다.":r.value==="cancel"?`관리자 생성을 취소할 경우,
입력한 정보가 삭제됩니다.`:r.value==="missing"?"입력한 정보를 다시 한번 확인해주세요.":r.value==="put"?"수정될 관리자 정보를 정확하게 입력하셨나요?":r.value==="put_complete"?"관리자 정보가 변경됐습니다.":r.value==="put_cancel"?`수정을 취소하면,
입력한 정보가 삭제됩니다.`:r.value==="delete"?`관리자를 삭제하면
담당자의 접근이 제한됩니다.`:r.value==="delete_complete"?"관리자 삭제 완료됐습니다.":r.value==="changePassword"?"비밀번호 재설정 메일 발송이 완료됐습니다.":""),i=f(()=>r.value==="missing"),C=f(()=>["regist","cancel","delete","put","put_cancel"].includes(r.value)),l=f(()=>r.value!=="regist"),w=f(()=>({cancel:e,regist:t["click:confirm"],regist_complete:e,delete:t["click:confirm"],delete_complete:e,put:t["click:confirm"],put_complete:e,put_cancel:e}));return(m,u)=>{const v=I("Alert",!0);return c(),h(v,{modelValue:a(t).show,"onUpdate:modelValue":u[0]||(u[0]=d=>a(t).show=d),title:o.value,error:i.value,message:n.value,showCancel:C.value,confirmClickClose:l.value,"onClick:confirm":w.value[r.value]},null,8,["modelValue","title","error","message","showCancel","confirmClickClose","onClick:confirm"])}}},qe={__name:"index",setup(s){const{isDetail:t}=k();return(e,r)=>(c(),h(a(ne),{title:a(t)?"관리자 상세보기":"관리자 생성"},{content:D(()=>[a(t)?(c(),h(Pe,{key:0})):(c(),h(De,{key:1}))]),footer:D(()=>[_(Ve,{isDetail:a(t)},null,8,["isDetail"])]),alert:D(()=>[_(Be)]),_:1},8,["title"]))}},Qe={__name:"index",setup(s){const{getQuery:t}=k();return(e,r)=>{var o;return["add","detail"].includes((o=a(t)())==null?void 0:o.view)?(c(),h(a(qe),{key:0})):(c(),h(a(ye),{key:1}))}}};export{Qe as default};
