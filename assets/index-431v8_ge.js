var E=Object.defineProperty;var j=(o,t,e)=>t in o?E(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var z=(o,t,e)=>j(o,typeof t!="symbol"?t+"":t,e);import{u as k}from"./useCustomRouter-CiU2rkZM.js";import{T as G,L as q}from"./index-Dm8pkpH6.js";import{_ as $,a as I,o as h,c as w,b as D,f as x,h as Q,d,u as s,q as M,r as B,k as T,w as W,e as O,s as L,p as g,v as b,t as N,n as R,A as Y,B as J}from"./index-BGi8GpGv.js";import{a as S}from"./index-CJtyaUy2.js";import{u as K,G as X}from"./index-DQhdp3Mo.js";import{S as Z}from"./SearchIcon-C8b4b_FZ.js";import{P as ee}from"./index-CBHngC_A.js";import{c as te,D as ae}from"./metaHelper-B8_iLp7n.js";import{u as se,C as H,a as oe}from"./Content-CKsiGma2.js";import{u as F}from"./useDropdownOptions-Bht9kext.js";import"./useForm-D-1CqejB.js";const ne={class:"title-button-group"},le={__name:"Title",setup(o){const{addQuery:t}=k();return(e,a)=>{const n=I("Button");return h(),w(s(G),{useTooltip:"",title:"자산 관리",tooltipPosition:"bottom-right"},{tooltip:D(()=>a[1]||(a[1]=[x("div",{class:"tooltip"},[x("div",{class:"title"},"자산이 무엇인가요?"),Q(" 자산이란 계정에서 운영하게 될 광고 자산을 의미합니다. 캠페인을 생성하게 위해서는 자산을 반드시 생성해야 합니다. 자산은 프로젝트 명이 될 수 있고, 광고주 명이 될 수 있으며, 캠페인 명이 될 수도 있습니다. ")],-1)])),rightArea:D(()=>[x("div",ne,[d(n,{outlined:"",width:98,size:"x-small",title:"자산 등록하기",onClick:a[0]||(a[0]=_=>s(t)({view:"add"}))})])]),_:1})}}},re=$(le,[["__scopeId","data-v-66ea2b3b"]]),ie={class:"grid-header-wrapper"},ue={class:"left-area"},ce={class:"item-wrapper"},de={class:"search-field"},me={class:"item-wrapper"},pe={__name:"Header",setup(o){const{getQuery:t,changeQuery:e}=k(),a=M([{title:"전체",value:"0"}]),n=B({}),_=(m,i)=>g({get:()=>n.value[m]||i,set:r=>n.value[m]=r&&r!=="ALL"?String(r).toUpperCase():void 0}),C=_("asset_id","0"),y=_("s_status","ALL");T(async()=>{const m=await S("partner").getOptions();(m==null?void 0:m.result.httpStatus)===200&&a.push(...m.body),f()}),W(t,f);function f(){["asset_id","s_status","pageSize"].forEach(m=>{const i=t()[m];n.value[m]=i&&i!=="ALL"?i.toUpperCase():void 0})}return(m,i)=>{const r=I("Dropdown"),p=I("Input"),l=I("Radio"),u=I("RadioGroup"),v=I("Button");return h(),O("div",ie,[x("div",ue,[x("div",ce,[i[3]||(i[3]=x("div",null,"자산",-1)),x("div",de,[d(r,{modelValue:s(C),"onUpdate:modelValue":i[0]||(i[0]=c=>L(C)?C.value=c:null),items:a,placeholder:"자산을 선택해 주세요."},null,8,["modelValue","items"]),d(p,{placeholder:"자산 명을 검색해 주세요."},{"prepend-icon":D(()=>[d(Z,{class:"mr-2"})]),_:1})])]),x("div",me,[i[4]||(i[4]=x("div",null,"자산 상태",-1)),d(u,{modelValue:s(y),"onUpdate:modelValue":i[1]||(i[1]=c=>L(y)?y.value=c:null)},{default:D(()=>[d(l,{label:"전체",value:"ALL"}),d(l,{label:"진행",value:"IN_PROGRESS"}),d(l,{label:"예약",value:"RESERVED"}),d(l,{label:"대기",value:"WAITING"})]),_:1},8,["modelValue"])])]),x("div",null,[d(v,{size:"tiny",title:"적용",onClick:i[2]||(i[2]=c=>s(e)(n.value))})])])}}},ve=$(pe,[["__scopeId","data-v-ac4ec00f"]]),_e={class:"toolbar-wrapper"},fe={class:"right-area"},ge={__name:"Toolbar",setup(o){return(t,e)=>{const a=I("Button");return h(),O("div",_e,[e[0]||(e[0]=x("div",{class:"left-area"},null,-1)),x("div",fe,[d(a,{color:"green",size:"x-small",title:"다운로드"}),d(s(ee))])])}}},he=$(ge,[["__scopeId","data-v-76da437c"]]),Ce={__name:"Alert",setup(o){const{alertObj:t}=b("alert"),e=g(()=>t.type),a=g(()=>e.value==="refresh"?"새로고침을 진행하시겠습니까?":e.value==="refresh_complete"?"DID 새로고침 완료":e.value==="restart"?"재시작을 진행하시겠습니까?":e.value==="restart_complete"?"DID 재시작 완료":e.value==="update"?"업데이트를 진행하시겠습니까?":e.value==="update_complete"?"DID 업데이트 완료":e.value==="on"?"기기 사용을 ON 하시겠습니까?":e.value==="on_complete"?"기기 사용 ON 완료":e.value==="off"?"기기 사용을 OFF 하시겠습니까?":e.value==="off_complete"?"기기 사용 OFF 완료":e.value==="finish"?"기기를 종료하시겠습니까?":e.value==="finish_complete"?"기기 종료 완료":""),n=g(()=>e.value==="refresh"?`새로고침을 할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="refresh_complete"?"DID 새로고침이 완료됐습니다.":e.value==="restart"?`재시작을 할 경우,
기기에 콘텐츠 노출이 멈추게 됩니다.`:e.value==="restart_complete"?`DID 재시작이 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="update"?`업데이트를 진행할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="update_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="on"?`기기 사용을 ON 하게 되면,
기기가 활성화됩니다.`:e.value==="on_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="off"?`기기 사용을 OFF 하게 되면,
기기 화면이 대기 상태로 전환되게 됩니다.`:e.value==="off_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="finish"?`기기 사용을 OFF 하게 되면,
기기가 꺼지게 됩니다.`:e.value==="finish_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:""),_=g(()=>{var f;return!((f=e.value)!=null&&f.endsWith("_complete"))}),C=g(()=>{var f;return(f=e.value)==null?void 0:f.endsWith("_complete")});function y(){t.type=`${e.value}_complete`}return(f,m)=>{const i=I("Alert",!0);return h(),w(i,{modelValue:s(t).show,"onUpdate:modelValue":m[0]||(m[0]=r=>s(t).show=r),title:a.value,message:n.value,showCancel:_.value,confirmClickClose:C.value,"onClick:confirm":y},null,8,["modelValue","title","message","showCancel","confirmClickClose"])}}},ye={__name:"ConnectionStatus",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(o){const t=o,e=g(()=>t.item.connectionStatus==="HEALTHY"?"양호":"이상");return(a,n)=>(h(),O("div",{class:R(["connection-status",{healthy:o.item.connectionStatus==="HEALTHY"}])},N(e.value),3))}},xe=$(ye,[["__scopeId","data-v-6fd8e271"]]),De={__name:"StorageSize",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(o){return(t,e)=>(h(),O("div",{class:R({unhealthy:o.item.connectionStatus==="UNHEALTHY"})},N(`${o.item.storageUsage||0}GB/${o.item.storageSize||0}GB`),3))}},we=$(De,[["__scopeId","data-v-bf2a8a24"]]),Ie={idx:{column:{title:"NO",type:"text"}},name:{column:{title:"자산 명",type:"text"},form:{row:1,required:!0,autofocus:!0,component:"input",class:"w-318",label:"자산 명",placeholder:"자산 명을 입력해 주세요.",errorMessages:{error:"",require:""}}},status:{column:{title:"자산 상태",type:"text"}},cost:{column:{title:"잔여 금액",type:"text"}},members:{column:{title:"담당자",type:"text"},form:{row:2,required:!0,component:"custom",label:"담당자",placeholder:"담당자를 선택해 주세요.",errorMessages:{error:"",require:""}}},detailView:{column:{title:"상세보기",type:"link"}}},be=["idx","name","status","cost","members","detailView"],ke=["name","members"],$e=te(Ie,be,ke);class V extends ae{constructor(t){super(t),this.detailView="상세보기기"}toRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>({...t,[e]:this[e]}),{})}}z(V,"metaData",$e);const Se={__name:"index",setup(o){const{page:t,size:e,totalPage:a,loading:n,items:_,selectedItems:C,addQuery:y}=K(m),f=V.toColumnHeaders();async function m({asset_id:r,s_status:p}){var A;const l={page:t.value,size:e.value};r&&(l.partnerIdx=r),p&&(l.connectionStatus=p),n.value=!0,_.value.length=0;const u=await S("asset").getPage(l),{result:v,body:c}=u||{};v.httpStatus===200&&(n.value=!1,(A=c==null?void 0:c.data)==null||A.forEach(U=>_.value.push(new V(U))),a.value=(c==null?void 0:c.totalPage)||0)}async function i({item:r,column:p}){var u;if(_.value.findIndex(v=>v.idx===r.idx)!==-1){if(p.type==="switch"){const v=await S("device").partialUpdate(r.idx,{active:!r.active});((u=v==null?void 0:v.result)==null?void 0:u.httpStatus)===200&&(r.active=!r.active)}if(p.type==="link")return y({view:"detail",id:r.idx})}}return(r,p)=>(h(),w(s(X),{page:s(t),items:s(_),loading:s(n),totalPage:s(a),columnHeaders:s(f),modelValue:s(C),"onUpdate:modelValue":p[0]||(p[0]=l=>L(C)?C.value=l:null),"onClick:cell":i,"onClick:page":p[1]||(p[1]=l=>s(y)({page:l}))},{header:D(()=>[d(ve)]),toolbar:D(()=>[d(he)]),alert:D(()=>[d(Ce)]),connectionStatus:D(({column:l,item:u})=>[d(xe,{column:l,item:u},null,8,["column","item"])]),storageSize:D(({column:l,item:u})=>[d(we,{column:l,item:u},null,8,["column","item"])]),_:1},8,["page","items","loading","totalPage","columnHeaders","modelValue"]))}},Ae=$(Se,[["__scopeId","data-v-2e9346b1"]]),Ve={__name:"index",setup(o){return(t,e)=>(h(),w(s(q),null,{title:D(()=>[d(re)]),content:D(()=>[d(s(Ae))]),_:1}))}};function P(){const o=V.toFormFields(),{values:t,errors:e,getFields:a,validateFields:n}=se(o);return{fields:a(["deviceId"]),values:t,errors:e,getFields:a,validateFields:()=>n(["deviceId"])}}const Oe={__name:"Create",setup(o){const{showAlert:t}=b("alert"),{routeList:e}=k(),{fields:a,values:n,errors:_,validateFields:C}=P(),{options:y,fetchOptions:f}=F(),{options:m,fetchOptions:i}=F(),r=g(()=>({partnerIdx:y.value,deviceCategoryIdx:m.value.map(l=>({...l,title:`${l.title1} / ${l.title2}`})),deviceDetailCategoryIdx:[{value:1,title:"기기 세부 유형A"},{value:2,title:"기기 세부 유형B"},{value:3,title:"기기 세부 유형C"},{value:4,title:"기기 세부 유형D"}]}));T(()=>{f("partner"),i("device/category")});const p=b("methods");return p.cancel=()=>Y(n)?t("cancel"):e(),p.submit=()=>{if(!C())return t("missing");t("regist",async()=>{var v;const l=new V({...n,...n.addressInfo}),u=await S("device").create(l.toRequestBody());t(((v=u==null?void 0:u.result)==null?void 0:v.httpStatus)===200?"regist_complete":"missing")})},(l,u)=>(h(),w(H,{fields:s(a),values:s(n),errors:s(_),items:r.value},null,8,["fields","values","errors","items"]))}},Fe={__name:"Detail",setup(o){const{showAlert:t}=b("alert"),{getQuery:e,routeList:a}=k(),{fields:n,values:_,errors:C}=P(),{options:y}=F(),{options:f}=F(),m=g(()=>n.map(u=>u.map(v=>({...v,disabled:!0})))),i=g(()=>({partnerIdx:y.value,deviceCategoryIdx:f.value,deviceDetailCategoryIdx:[{value:1,title:"기기 세부 유형A"},{value:2,title:"기기 세부 유형B"},{value:3,title:"기기 세부 유형C"},{value:4,title:"기기 세부 유형D"}]})),r=B(!1),p=B(null);T(async()=>{var A;r.value=!0;const u=await S("device").getDetail((A=e())==null?void 0:A.id),{result:v,body:c}=u||{};v.httpStatus===200&&(J(_,{...c,partnerIdx:c.partnerName,deviceCategoryIdx:c.deviceDetailType}),p.value=c.createdAt,y.value.push({title:c.partnerName,value:c.partnerName}),f.value.push({title:`${c.deviceType} / ${c.deviceDetailType}`,value:c.deviceDetailType}),r.value=!1)});const l=b("methods");return l.cancel=a,l.submit=()=>{t("delete",async()=>{var v,c;const u=await S("device").delete((v=e())==null?void 0:v.id);((c=u==null?void 0:u.result)==null?void 0:c.httpStatus)===200&&t("delete_complete")})},(u,v)=>(h(),w(H,{isDetail:"",fields:m.value,values:s(_),errors:s(C),items:i.value,createdAt:p.value},null,8,["fields","values","errors","items","createdAt"]))}},Be={class:"flex justify-between align-center"},Le={class:"button-group"},Te={__name:"Footer",props:{isDetail:{type:Boolean,default:!1}},setup(o){const t=b("methods");return(e,a)=>{const n=I("Button");return h(),O("div",Be,[a[0]||(a[0]=x("div",null,null,-1)),x("div",Le,[d(n,{outlined:"",width:55,size:"medium",color:"neutral",title:o.isDetail?"목록":"취소",onClick:s(t).cancel},null,8,["title","onClick"]),d(n,{size:"medium",width:55,color:o.isDetail?"red":"primary",title:o.isDetail?"삭제":"등록",onClick:s(t).submit},null,8,["color","title","onClick"])])])}}},ze=$(Te,[["__scopeId","data-v-867d9188"]]),Ne={__name:"Alert",setup(o){const{alertObj:t}=b("alert"),{routeList:e}=k(),a=g(()=>t.type),n=g(()=>a.value==="regist"?"기기를 등록하시겠습니까?":a.value==="regist_complete"?"기기 등록 완료":a.value==="cancel"?"기기 등록을 취소하시겠습니까?":a.value==="missing"?"잘못된 정보 또는 누락된 정보가 있습니다.":a.value==="delete"?"기기 정보를 삭제하시겠습니까?":a.value==="delete_complete"?"기기 정보 삭제 완료":""),_=g(()=>a.value==="regist_complete"?"기기 등록이 완료됐습니다.":a.value==="cancel"?`기기 등록을 취소할 경우,
입력한 정보가 삭제됩니다.`:a.value==="missing"?"입력한 정보를 다시 한번 확인해주세요.":a.value==="delete"?`기기 정보가 삭제되면,
기존 데이터가 전체 삭제 됩니다.`:a.value==="delete_complete"?"기기 정보 삭제 완료됐습니다.":""),C=g(()=>a.value==="missing"),y=g(()=>["regist","cancel","delete"].includes(a.value)),f=g(()=>a.value!=="regist"),m=g(()=>({cancel:e,regist:t["click:confirm"],regist_complete:e,delete:t["click:confirm"],delete_complete:e}));return(i,r)=>{const p=I("Alert",!0);return h(),w(p,{modelValue:s(t).show,"onUpdate:modelValue":r[0]||(r[0]=l=>s(t).show=l),title:n.value,error:C.value,message:_.value,showCancel:y.value,confirmClickClose:f.value,"onClick:confirm":m.value[a.value]},null,8,["modelValue","title","error","message","showCancel","confirmClickClose","onClick:confirm"])}}},Re={__name:"index",setup(o){const{isDetail:t}=k();return(e,a)=>(h(),w(s(oe),{title:s(t)?"자산 상세보기":"자산 등록"},{content:D(()=>[s(t)?(h(),w(Fe,{key:0})):(h(),w(Oe,{key:1}))]),footer:D(()=>[d(ze,{isDetail:s(t)},null,8,["isDetail"])]),alert:D(()=>[d(Ne)]),_:1},8,["title"]))}},Ke={__name:"index",setup(o){const{getQuery:t}=k();return(e,a)=>{var n;return["add","detail"].includes((n=s(t)())==null?void 0:n.view)?(h(),w(s(Re),{key:0})):(h(),w(s(Ve),{key:1}))}}};export{Ke as default};
