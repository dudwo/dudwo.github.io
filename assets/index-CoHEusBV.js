var G=Object.defineProperty;var U=(l,t,e)=>t in l?G(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var M=(l,t,e)=>U(l,typeof t!="symbol"?t+"":t,e);import{u as B}from"./useCustomRouter-CiU2rkZM.js";import{T as j,L as z}from"./index-Dm8pkpH6.js";import{o as y,c as x,u,_ as A,r as N,w as F,k as R,a as D,e as I,f as w,d as a,b as g,s as L,p as b,C as O,t as S,v as V,L as H,I as Q,Q as W,B as K,G as Y,J as E,K as T}from"./index-BGi8GpGv.js";import{a as k}from"./index-CJtyaUy2.js";import{u as J,G as X}from"./index-DQhdp3Mo.js";import{S as Z}from"./SearchIcon-C8b4b_FZ.js";import{P as ee}from"./index-CBHngC_A.js";import{c as te,D as se}from"./metaHelper-B8_iLp7n.js";import{u as oe,C as ae,a as le}from"./Content-CKsiGma2.js";import"./useForm-D-1CqejB.js";const ne={__name:"Title",setup(l){return(t,e)=>(y(),x(u(j),{title:"사용자 관리"}))}},re={class:"grid-header-wrapper"},ue={class:"left-area"},ie={class:"item-wrapper"},ce={class:"search-field"},me={class:"item-wrapper"},pe={class:"item-wrapper"},de={__name:"Header",setup(l){const{getQuery:t,changeQuery:e}=B(),s=N({}),n=(_,o)=>b({get:()=>s.value[_]||o,set:r=>s.value[_]=r&&r!=="ALL"?String(r).toUpperCase():void 0}),i=n("c_status","ALL"),p=n("s_status","ALL"),f=N("");F(f,_=>s.value.userName=_||void 0),R(v),F(t,v);function v(){var _;f.value=((_=t())==null?void 0:_.userName)||void 0,["c_status","s_status","pageSize"].forEach(o=>{const r=t()[o];s.value[o]=r&&r!=="ALL"?r.toUpperCase():void 0})}return(_,o)=>{const r=D("Input"),c=D("Radio"),d=D("RadioGroup"),h=D("Button");return y(),I("div",re,[w("div",ue,[w("div",ie,[o[5]||(o[5]=w("div",null,"검색어",-1)),w("div",ce,[a(r,{placeholder:"검색어를 입력해 주세요.",modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=m=>f.value=m),"onKeydown:enter":o[1]||(o[1]=m=>u(e)(s.value))},{"prepend-icon":g(()=>[a(Z,{class:"mr-2"})]),_:1},8,["modelValue"])])]),w("div",me,[o[6]||(o[6]=w("div",null,"계정 구분",-1)),a(d,{modelValue:u(i),"onUpdate:modelValue":o[2]||(o[2]=m=>L(i)?i.value=m:null)},{default:g(()=>[a(c,{label:"전체",value:"ALL"}),a(c,{label:"대행사",value:"AGENCY"}),a(c,{label:"랩사",value:"MEDIALAB"}),a(c,{label:"일반",value:"COMPANY"})]),_:1},8,["modelValue"])]),w("div",pe,[o[7]||(o[7]=w("div",null,"가입 상태",-1)),a(d,{modelValue:u(p),"onUpdate:modelValue":o[3]||(o[3]=m=>L(p)?p.value=m:null)},{default:g(()=>[a(c,{label:"전체",value:"ALL"}),a(c,{label:"사용",value:"VERIFIED"}),a(c,{label:"정지",value:"BLOCKED"}),a(c,{label:"탈퇴",value:"WITHDRAWN"})]),_:1},8,["modelValue"])])]),w("div",null,[a(h,{size:"tiny",title:"적용",onClick:o[4]||(o[4]=m=>u(e)(s.value))})])])}}},_e=A(de,[["__scopeId","data-v-d8b9c36b"]]),fe={class:"toolbar-wrapper"},ve={class:"right-area"},he={__name:"Toolbar",setup(l){return(t,e)=>{const s=D("Button");return y(),I("div",fe,[e[0]||(e[0]=w("div",{class:"left-area"},null,-1)),w("div",ve,[a(s,{color:"green",size:"x-small",title:"다운로드"}),a(u(ee))])])}}},ye=A(he,[["__scopeId","data-v-372e08ee"]]),be={__name:"Alert",props:{modelValue:{},modelModifiers:{},type:{},typeModifiers:{}},emits:["update:modelValue","update:type"],setup(l){const t=O(l,"modelValue"),e=O(l,"type"),s=b(()=>e.value==="refresh"?"새로고침을 진행하시겠습니까?":e.value==="refresh_complete"?"DID 새로고침 완료":e.value==="restart"?"재시작을 진행하시겠습니까?":e.value==="restart_complete"?"DID 재시작 완료":e.value==="update"?"업데이트를 진행하시겠습니까?":e.value==="update_complete"?"DID 업데이트 완료":e.value==="on"?"기기 사용을 ON 하시겠습니까?":e.value==="on_complete"?"기기 사용 ON 완료":e.value==="off"?"기기 사용을 OFF 하시겠습니까?":e.value==="off_complete"?"기기 사용 OFF 완료":e.value==="finish"?"기기를 종료하시겠습니까?":e.value==="finish_complete"?"기기 종료 완료":""),n=b(()=>e.value==="refresh"?`새로고침을 할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="refresh_complete"?"DID 새로고침이 완료됐습니다.":e.value==="restart"?`재시작을 할 경우,
기기에 콘텐츠 노출이 멈추게 됩니다.`:e.value==="restart_complete"?`DID 재시작이 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="update"?`업데이트를 진행할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="update_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="on"?`기기 사용을 ON 하게 되면,
기기가 활성화됩니다.`:e.value==="on_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="off"?`기기 사용을 OFF 하게 되면,
기기 화면이 대기 상태로 전환되게 됩니다.`:e.value==="off_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="finish"?`기기 사용을 OFF 하게 되면,
기기가 꺼지게 됩니다.`:e.value==="finish_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:""),i=b(()=>{var v;return!((v=e.value)!=null&&v.endsWith("_complete"))}),p=b(()=>{var v;return(v=e.value)==null?void 0:v.endsWith("_complete")});function f(){e.value=`${e.value}_complete`}return(v,_)=>{const o=D("Alert",!0);return y(),x(o,{modelValue:t.value,"onUpdate:modelValue":_[0]||(_[0]=r=>t.value=r),title:s.value,message:n.value,showCancel:i.value,confirmClickClose:p.value,"onClick:confirm":f},null,8,["modelValue","title","message","showCancel","confirmClickClose"])}}},ge={__name:"CompanyBusinessType",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(l){const t=l,e=b(()=>{var s;return(s=t.column.items.find(n=>n.value===t.item[t.column.key]))==null?void 0:s.title});return(s,n)=>(y(),I("div",null,S(e.value),1))}},we={__name:"Position",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(l){const t=l,e=b(()=>{var s;return(s=t.column.items.find(n=>n.value===t.item[t.column.key]))==null?void 0:s.title});return(s,n)=>(y(),I("div",null,S(e.value),1))}},Ce={idx:{column:{title:"NO",type:"text"}},name:{column:{title:"사용자 명명",type:"text"},form:{row:1,autoFocus:!0,component:"input",class:"w-318",label:"사용자 명",placeholder:"사용자 명을 입력해 주세요.",errorMessages:{error:"",require:""}}},email:{column:{title:"계정 아이디 (이메일)",type:"text"},form:{row:2,component:"custom",label:"계정 아이디 (이메일)",placeholder:"",errorMessages:{error:"",require:""}}},companyBusinessType:{column:{title:"계정 구분",type:"text"},form:{row:3,component:"input",class:"w-318",label:"계정 구분",placeholder:"계정 구분을 입력해 주세요.",errorMessages:{error:"",require:""}},common:{items:[{title:"대행사",value:"AGENCY"},{title:"랩사",value:"MEDIALAB"},{title:"일반",value:"COMPANY"}]}},position:{column:{title:"계정 상태",type:"text"},form:{row:3,component:"input",class:"w-318",label:"계정 상태",placeholder:"계정 상태를 입력해 주세요.",errorMessages:{error:"",require:""}},common:{items:[{title:"ROOT",value:"ROOT"},{title:"MANAGER",value:"MANAGER"},{title:"STAFF",value:"STAFF"},{title:"NONE",value:"NONE"}]}},companyName:{form:{row:4,component:"input",class:"w-318",label:"회사 명",placeholder:"회사 명을 입력해 주세요.",errorMessages:{error:"",require:""}}},companyBusinessNumber:{form:{row:5,component:"input",class:"w-318",label:"사업자 번호",placeholder:"사업자 번호를 입력해 주세요.",errorMessages:{error:"",require:""}}},status:{column:{title:"가입 상태",type:"dropdown"},form:{row:6,component:"dropdown",class:"w-318",label:"가입 상태",placeholder:"가입 상태를 선택해 주세요.",errorMessages:{error:"",require:""}},common:{items:[{title:"정상",value:"VERIFIED"},{title:"정지",value:"BLOCKED"},{title:"탈퇴",value:"WITHDRAWN"},{title:"대기",value:"PENDING"}]}},assetCount:{column:{title:"할당된 광고 자산",type:"text"}},assets:{form:{row:7,component:"custom",customName:"assets",class:"w-318",label:"할당된 광고 자산",placeholder:"",errorMessages:{error:"",require:""}}},phone:{column:{title:"연락처",type:"text"},form:{row:5,component:"input",class:"w-318",label:"연락처",placeholder:"연락처를 입력해 주세요.",errorMessages:{error:"",require:""}}},detailView:{column:{title:"상세보기",type:"link"}}},De=["idx","name","email","companyBusinessType","position","status","assetCount","phone","detailView"],xe=["name","email","companyBusinessType","position","companyName","companyBusinessNumber","phone","status","assets"],Ve=te(Ce,De,xe);class $ extends se{constructor(t){var e;super(t),this.assetCount=((e=t.assets)==null?void 0:e.length)||0,this.detailView="상세보기"}toRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>({...t,[e]:this[e]}),{})}toPutRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>({...t,[e]:this[e]}),{})}}M($,"metaData",Ve);const Ie={__name:"index",setup(l){const{page:t,size:e,totalPage:s,loading:n,items:i,addQuery:p}=J(v),f=$.toColumnHeaders();async function v({userName:o,c_status:r,s_status:c}){var P;const d={page:t.value,size:e.value};o&&(d.searchKeyword=o),r&&(d.companyBusinessType=r),c&&(d.status=c),n.value=!0,i.value.length=0;const h=await k("member").getPage(d),{result:m,body:C}=h||{};m.httpStatus===200&&(n.value=!1,(P=C==null?void 0:C.data)==null||P.forEach(q=>i.value.push(new $(q))),s.value=(C==null?void 0:C.totalPage)||0)}async function _({item:o,column:r,newValue:c}){var h;if(i.value.findIndex(m=>m.id===o.id)!==-1){if(r.type==="link")return p({view:"detail",id:o.idx});if(r.type==="dropdown"){const m=await k("member").partialUpdate(o.idx,{[r.key]:c});((h=m==null?void 0:m.result)==null?void 0:h.httpStatus)===200&&(o[r.key]=c)}}}return(o,r)=>(y(),x(u(X),{page:u(t),items:u(i),loading:u(n),totalPage:u(s),columnHeaders:u(f),"onClick:cell":_,"onClick:page":r[0]||(r[0]=c=>u(p)({page:c}))},{header:g(()=>[a(_e)]),toolbar:g(()=>[a(ye)]),alert:g(()=>[a(be)]),companyBusinessType:g(({item:c,column:d})=>[a(ge,{item:c,column:d},null,8,["item","column"])]),position:g(({item:c,column:d})=>[a(we,{item:c,column:d},null,8,["item","column"])]),_:1},8,["page","items","loading","totalPage","columnHeaders"]))}},Ae=A(Ie,[["__scopeId","data-v-9c732ee8"]]),ke={__name:"index",setup(l){return(t,e)=>(y(),x(u(z),null,{title:g(()=>[a(ne)]),content:g(()=>[a(u(Ae))]),_:1}))}};function Be(l){const t=$.toFormFields(),{values:e,errors:s,getFields:n,validateFields:i}=oe(t);return{fields:n([],l),values:e,errors:s,validateFields:i}}const Ne={class:"email-wrapper"},Oe={__name:"Email",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(l){const t=O(l,"modelValue"),{showAlert:e}=V("alert"),{getQuery:s}=B();async function n(){var p,f;const i=await k("member").changePassword((p=s())==null?void 0:p.id);((f=i==null?void 0:i.result)==null?void 0:f.httpStatus)===200&&e("changePassword")}return(i,p)=>{const f=D("Input"),v=D("Button");return y(),I("div",Ne,[a(f,H({...i.$attrs},{modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=_=>t.value=_)}),null,16,["modelValue"]),a(v,{outlined:"",width:103,title:"비빌번호 변경",onClick:n})])}}},$e=A(Oe,[["__scopeId","data-v-b2fee5cb"]]),Fe={class:"assets-wrapper"},Pe={__name:"Assets",props:Q({label:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const t=l,e=O(l,"modelValue"),s=b(()=>`${t.label} (${e.value.length})`);return(n,i)=>(y(),I("div",Fe,[a(u(W),{label:s.value},null,8,["label"])]))}},Me=A(Pe,[["__scopeId","data-v-708a5086"]]),Le={__name:"Detail",setup(l){const{showAlert:t}=V("alert"),e=V("footer-props"),{getQuery:s,routeList:n}=B(),{fields:i,values:p,errors:f,validateFields:v}=Be(!0),_=b(()=>i.map(d=>d.map(h=>({...h,disabled:h.key!=="status"})))),o=N(!1),r=N({});R(async()=>{var C;o.value=!0,e.disabledSubmit=!0;const d=await k("member").getDetail((C=s())==null?void 0:C.id),{result:h,body:m}=d||{};h.httpStatus===200&&(r.value=K(p,{...m}),o.value=!1)}),F(p,()=>e.disabledSubmit=!Y(r.value,p));const c=V("methods");return c.cancel=()=>e.disabledSubmit?n():t("put_cancel"),c.submit=()=>{if(!v())return t("missing");t("put",async()=>{var m,C;const{status:d}=p,h=await k("member").partialUpdate((m=s())==null?void 0:m.id,{status:d});((C=h==null?void 0:h.result)==null?void 0:C.httpStatus)===200&&t("put_complete")})},(d,h)=>(y(),x(ae,{isDetail:"",fields:_.value,values:u(p),errors:u(f)},{custom:g(m=>[a($e,E(T(m)),null,16)]),assets:g(m=>[a(Me,E(T(m)),null,16)]),_:1},8,["fields","values","errors"]))}},Ee={class:"flex justify-between align-center"},Te={class:"button-group"},Re={__name:"Footer",setup(l){const t=V("methods"),e=V("footer-props");return(s,n)=>{const i=D("Button");return y(),I("div",Ee,[n[0]||(n[0]=w("div",null,null,-1)),w("div",Te,[a(i,{outlined:"",title:"취소",size:"medium",color:"neutral",width:55,onClick:u(t).cancel},null,8,["onClick"]),a(i,{title:"수정",size:"medium",color:"primary",width:55,disabled:u(e).disabledSubmit,onClick:u(t).submit},null,8,["disabled","onClick"])])])}}},Se=A(Re,[["__scopeId","data-v-41b03fbc"]]),qe={__name:"Alert",setup(l){const{alertObj:t}=V("alert"),{routeList:e}=B(),s=b(()=>t.type),n=b(()=>s.value==="changePassword"?"비밀번호 재설정 메일 전송 완료":s.value==="put"?"이대로 수정하시겠습니까?":s.value==="put_cancel"?"수정을 취소하시겠습니까?":s.value==="put_complete"?"수정 완료 됐습니다.":""),i=b(()=>s.value==="changePassword"?`해당 사용자에게 비밀번호 재설정
메일 전송이 완료됐습니다.`:s.value==="put"?"사용자가 서비스를 이용하지 못할 수도 있습니다.":s.value==="put_cancel"?`수정을 취소하면,
입력한 정보가 삭제됩니다.`:s.value==="put_complete"?"사용자 정보가 수정 완료됐습니다.":""),p=b(()=>["put","put_cancel"].includes(s.value)),f=b(()=>s.value!=="put"),v=b(()=>({put_cancel:e,put_complete:e,put:t["click:confirm"]}));return(_,o)=>{const r=D("Alert",!0);return y(),x(r,{modelValue:u(t).show,"onUpdate:modelValue":o[0]||(o[0]=c=>u(t).show=c),title:n.value,message:i.value,showCancel:p.value,confirmClickClose:f.value,"onClick:confirm":v.value[s.value]},null,8,["modelValue","title","message","showCancel","confirmClickClose","onClick:confirm"])}}},Ge={__name:"index",setup(l){return(t,e)=>(y(),x(u(le),{title:"사용자 상세 정보"},{content:g(()=>[a(Le)]),footer:g(()=>[a(Se)]),alert:g(()=>[a(qe)]),_:1}))}},et={__name:"index",setup(l){const{getQuery:t}=B();return(e,s)=>{var n;return["detail"].includes((n=u(t)())==null?void 0:n.view)?(y(),x(u(Ge),{key:0})):(y(),x(u(ke),{key:1}))}}};export{et as default};
