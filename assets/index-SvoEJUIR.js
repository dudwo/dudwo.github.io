var N=Object.defineProperty;var T=(s,t,e)=>t in s?N(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var B=(s,t,e)=>T(s,typeof t!="symbol"?t+"":t,e);import{u as x}from"./useCustomRouter-CiU2rkZM.js";import{T as L,L as R}from"./index-Dm8pkpH6.js";import{_ as V,a as $,o as f,c as v,b as D,f as A,d as w,u as l,e as q,C as P,p as h,D as I,v as b,A as j,r as M,k as G,B as H,w as Q,G as U,M as Y}from"./index-BGi8GpGv.js";import{a as k}from"./index-CJtyaUy2.js";import{u as E,G as W}from"./index-DQhdp3Mo.js";import{P as J}from"./index-CBHngC_A.js";import{c as K,D as X}from"./metaHelper-B8_iLp7n.js";import{u as Z,C as S,a as ee}from"./Content-CKsiGma2.js";import"./useForm-D-1CqejB.js";const te={class:"title-button-group"},re={__name:"Title",setup(s){const{addQuery:t}=x();return(e,r)=>{const o=$("Button");return f(),v(l(L),{title:"공지사항 관리"},{rightArea:D(()=>[A("div",te,[w(o,{outlined:"",width:98,size:"x-small",title:"공지사항 등록",onClick:r[0]||(r[0]=n=>l(t)({view:"add"}))})])]),_:1})}}},le=V(re,[["__scopeId","data-v-0bf74d04"]]),se={class:"toolbar-wrapper"},oe={class:"right-area"},ae={__name:"Toolbar",setup(s){return(t,e)=>(f(),q("div",se,[e[0]||(e[0]=A("div",{class:"left-area"},null,-1)),A("div",oe,[w(l(J))])]))}},ne=V(ae,[["__scopeId","data-v-2635097a"]]),ie={__name:"Alert",props:{modelValue:{},modelModifiers:{},type:{},typeModifiers:{}},emits:["update:modelValue","update:type"],setup(s){const t=P(s,"modelValue"),e=P(s,"type"),r=h(()=>e.value==="refresh"?"새로고침을 진행하시겠습니까?":e.value==="refresh_complete"?"DID 새로고침 완료":e.value==="restart"?"재시작을 진행하시겠습니까?":e.value==="restart_complete"?"DID 재시작 완료":e.value==="update"?"업데이트를 진행하시겠습니까?":e.value==="update_complete"?"DID 업데이트 완료":e.value==="on"?"기기 사용을 ON 하시겠습니까?":e.value==="on_complete"?"기기 사용 ON 완료":e.value==="off"?"기기 사용을 OFF 하시겠습니까?":e.value==="off_complete"?"기기 사용 OFF 완료":e.value==="finish"?"기기를 종료하시겠습니까?":e.value==="finish_complete"?"기기 종료 완료":""),o=h(()=>e.value==="refresh"?`새로고침을 할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="refresh_complete"?"DID 새로고침이 완료됐습니다.":e.value==="restart"?`재시작을 할 경우,
기기에 콘텐츠 노출이 멈추게 됩니다.`:e.value==="restart_complete"?`DID 재시작이 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="update"?`업데이트를 진행할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="update_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="on"?`기기 사용을 ON 하게 되면,
기기가 활성화됩니다.`:e.value==="on_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="off"?`기기 사용을 OFF 하게 되면,
기기 화면이 대기 상태로 전환되게 됩니다.`:e.value==="off_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="finish"?`기기 사용을 OFF 하게 되면,
기기가 꺼지게 됩니다.`:e.value==="finish_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:""),n=h(()=>{var m;return!((m=e.value)!=null&&m.endsWith("_complete"))}),p=h(()=>{var m;return(m=e.value)==null?void 0:m.endsWith("_complete")});function g(){e.value=`${e.value}_complete`}return(m,_)=>{const u=$("Alert",!0);return f(),v(u,{modelValue:t.value,"onUpdate:modelValue":_[0]||(_[0]=i=>t.value=i),title:r.value,message:o.value,showCancel:n.value,confirmClickClose:p.value,"onClick:confirm":g},null,8,["modelValue","title","message","showCancel","confirmClickClose"])}}},ue={idx:{column:{title:"NO",type:"text"}},title:{column:{title:"제목",type:"text"},form:{row:1,required:!0,autoFocus:!0,component:"input",label:"제목",placeholder:"제목을 입력해 주세요.",errorMessages:{error:"",require:""}}},content:{form:{row:2,required:!0,component:"editor",label:"본문 내용",placeholder:"내용을 입력해 주세요.",errorMessages:{error:"",require:""}}},publishAt:{form:{row:3,required:!0,component:"datePicker",class:"w-318",label:"게재일",placeholder:"게재일을 선택해 주세요.",errorMessages:{error:"",require:""}}},used:{column:{title:"사용 여부",type:"switch"},form:{row:3,required:!0,component:"switch",class:"w-318",label:"사용 여부",placeholder:"",errorMessages:{error:"",require:""}}},createdAt:{column:{title:"등록일",type:"date"}},updatedAt:{column:{title:"수정일",type:"date"}},detailView:{column:{title:"상세보기",type:"link"}}},ce=["idx","title","used","createdAt","updatedAt","detailView"],de=["title","content","publishAt","used"],pe=K(ue,ce,de);class y extends X{constructor(t){super(t),this.detailView="상세보기"}toRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>["publishAt"].includes(e)?{...t,[e]:I(this[e]).valueOf()}:{...t,[e]:this[e]},{})}toPutRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>["publishAt"].includes(e)?{...t,[e]:I(this[e]).valueOf()}:{...t,[e]:this[e]},{})}}B(y,"metaData",pe);const me={__name:"index",setup(s){const{page:t,size:e,totalPage:r,loading:o,items:n,addQuery:p}=E(m),g=y.toColumnHeaders();async function m(){var c;const u={page:t.value,size:e.value};o.value=!0,n.value.length=0;const i=await k("notice").getPage(u),{result:C,body:a}=i||{};C.httpStatus===200&&(o.value=!1,(c=a==null?void 0:a.data)==null||c.forEach(d=>n.value.push(new y(d))),r.value=(a==null?void 0:a.totalPage)||0)}async function _({item:u,column:i,newValue:C}){var c;if(n.value.findIndex(d=>d.id===u.id)!==-1){if(i.type==="link")return p({view:"detail",id:u.idx});if(i.type==="switch"){const d=await k("notice").partialUpdate(u.idx,{[i.key]:!u[i.key]});((c=d==null?void 0:d.result)==null?void 0:c.httpStatus)===200&&(u[i.key]=!u[i.key])}}}return(u,i)=>(f(),v(l(W),{page:l(t),items:l(n),loading:l(o),totalPage:l(r),columnHeaders:l(g),"onClick:cell":_,"onClick:page":i[0]||(i[0]=C=>l(p)({page:C}))},{toolbar:D(()=>[w(ne)]),alert:D(()=>[w(ie)]),_:1},8,["page","items","loading","totalPage","columnHeaders"]))}},fe=V(me,[["__scopeId","data-v-aefdfd27"]]),_e={__name:"index",setup(s){return(t,e)=>(f(),v(l(R),null,{title:D(()=>[w(le)]),content:D(()=>[w(l(fe))]),_:1}))}};function z(s){const t=y.toFormFields(),{values:e,errors:r,getFields:o,validateFields:n}=Z(t);return e.used=!0,{fields:o([],s),values:e,errors:r,validateFields:n}}const ve={__name:"Create",setup(s){const{showAlert:t}=b("alert"),{routeList:e}=x(),{fields:r,values:o,errors:n,validateFields:p}=z(),g=b("methods");return g.cancel=()=>j(o)?t("cancel"):e(),g.submit=()=>{if(!p())return t("missing");t("regist",async()=>{var u;const m=new y({...o}),_=await k("notice").create(m.toRequestBody());t(((u=_==null?void 0:_.result)==null?void 0:u.httpStatus)===200?"regist_complete":"missing")})},(m,_)=>(f(),v(S,{fields:l(r),values:l(o),errors:l(n)},null,8,["fields","values","errors"]))}},he={__name:"Detail",setup(s){const{showAlert:t}=b("alert"),e=b("footer-props"),{getQuery:r,routeList:o}=x(),{fields:n,values:p,errors:g,validateFields:m}=z(!0),_=h(()=>n.map(a=>a.map(c=>({...c})))),u=M(!1),i=M({});G(async()=>{var O;u.value=!0,e.disabledSubmit=!0;const a=await k("notice").getDetail((O=r())==null?void 0:O.id),{result:c,body:d}=a||{};if(c.httpStatus!==200)return;const F=I(d.publishAt).format("YYYY-MM-DD");i.value=H(p,{...d,publishAt:F}),u.value=!1}),Q(p,()=>e.disabledSubmit=!U(i.value,p));const C=b("methods");return C.cancel=()=>e.disabledSubmit?o():t("put_cancel"),C.delete=()=>t("delete",async()=>{var c,d;const a=await k("notice").delete((c=r())==null?void 0:c.id);((d=a==null?void 0:a.result)==null?void 0:d.httpStatus)===200&&t("delete_complete")}),C.submit=()=>{if(!m())return t("missing");t("put",async()=>{var d,F;const a=new y({...p}),c=await k("notice").update((d=r())==null?void 0:d.id,a.toPutRequestBody());((F=c==null?void 0:c.result)==null?void 0:F.httpStatus)===200&&t("put_complete")})},(a,c)=>(f(),v(S,{isDetail:"",fields:_.value,values:l(p),errors:l(g)},null,8,["fields","values","errors"]))}},ge={class:"flex justify-between align-center"},Ce={class:"button-group"},we={__name:"Footer",props:{isDetail:{type:Boolean,default:!1}},setup(s){const t=b("methods"),e=b("footer-props");return(r,o)=>{const n=$("Button");return f(),q("div",ge,[o[0]||(o[0]=A("div",null,null,-1)),A("div",Ce,[w(n,{outlined:"",width:55,title:s.isDetail?"목록":"취소",size:"medium",color:"neutral",onClick:l(t).cancel},null,8,["title","onClick"]),s.isDetail?(f(),v(n,{key:0,size:"medium",title:"삭제",color:"red",width:55,onClick:l(t).delete},null,8,["onClick"])):Y("",!0),w(n,{size:"medium",color:"primary",width:55,title:s.isDetail?"수정":"등록",disabled:l(e).disabledSubmit,onClick:l(t).submit},null,8,["title","disabled","onClick"])])])}}},De=V(we,[["__scopeId","data-v-1e347a69"]]),be={__name:"Alert",setup(s){const{alertObj:t}=b("alert"),{routeList:e}=x(),r=h(()=>t.type),o=h(()=>r.value==="regist"?"공지사항을 등록하시겠습니까?":r.value==="regist_complete"?"공지사항 등록 완료":r.value==="cancel"?"공지사항 등록을 취소하시겠습니까?":r.value==="missing"?"잘못된 정보 또는 누락된 정보가 있습니다.":r.value==="put"?"공지사항을 정보를 수정하시겠습니까?":r.value==="put_complete"?"공지사항 수정 완료":r.value==="put_cancel"?"공지사항 수정을 취소하시겠습니까?":r.value==="delete"?"공지사항을 삭제하시겠습니까?":r.value==="delete_complete"?"공지사항 삭제 완료":""),n=h(()=>r.value==="regist_complete"?"공지사항 등록이 완료됐습니다.":r.value==="cancel"?`공지사항 등록을 취소할 경우,
입력한 정보가 삭제됩니다.`:r.value==="missing"?"입력한 정보를 다시 한번 확인해주세요.":r.value==="put"?"수정할 내용을 충분히 확인하셨나요?":r.value==="put_complete"?"공지사항 수정 완료됐습니다.":r.value==="put_cancel"?`수정을 취소하면,
입력한 정보가 삭제됩니다.`:r.value==="delete"?`공지사항을 삭제하면
사용자 화면에서 보이지 않습니다.`:r.value==="delete_complete"?"공지사항 삭제 완료했습니다.":""),p=h(()=>r.value==="missing"),g=h(()=>["regist","cancel","delete","put","put_cancel"].includes(r.value)),m=h(()=>!["regist","put","delete"].includes(r.value)),_=h(()=>({cancel:e,regist:t["click:confirm"],regist_complete:e,delete:t["click:confirm"],delete_complete:e,put:t["click:confirm"],put_complete:e,put_cancel:e}));return(u,i)=>{const C=$("Alert",!0);return f(),v(C,{modelValue:l(t).show,"onUpdate:modelValue":i[0]||(i[0]=a=>l(t).show=a),title:o.value,error:p.value,message:n.value,showCancel:g.value,confirmClickClose:m.value,"onClick:confirm":_.value[r.value]},null,8,["modelValue","title","error","message","showCancel","confirmClickClose","onClick:confirm"])}}},ke={__name:"index",setup(s){const{isDetail:t}=x();return(e,r)=>(f(),v(l(ee),{title:l(t)?"공지사항 상세 내용":"공지사항 등록"},{content:D(()=>[l(t)?(f(),v(he,{key:0})):(f(),v(ve,{key:1}))]),footer:D(()=>[w(De,{isDetail:l(t)},null,8,["isDetail"])]),alert:D(()=>[w(be)]),_:1},8,["title"]))}},Me={__name:"index",setup(s){const{getQuery:t}=x();return(e,r)=>{var o;return["add","detail"].includes((o=l(t)())==null?void 0:o.view)?(f(),v(l(ke),{key:0})):(f(),v(l(_e),{key:1}))}}};export{Me as default};
