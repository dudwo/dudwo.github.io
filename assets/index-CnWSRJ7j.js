const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RefreshIcon-BH4ZBiqo.js","assets/index-BGi8GpGv.js","assets/index-COnhC-wI.css","assets/RefreshIcon-CUAiPN4d.css","assets/RestartIcon-BAW3uK_Q.js","assets/RestartIcon-D0aAnatu.css","assets/UpdateIcon-Cmgn6-vx.js","assets/UpdateIcon-vZZaDzb9.css","assets/OnIcon-c6Qgjds-.js","assets/OnIcon-KWe0IraU.css","assets/OffIcon-DI1FsZtX.js","assets/OffIcon-CF3L8Rn3.css","assets/FinishIcon-DHl8Lyg0.js","assets/FinishIcon-BePJ4-XT.css"])))=>i.map(i=>d[i]);
var j=Object.defineProperty;var Y=(s,t,e)=>t in s?j(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var H=(s,t,e)=>Y(s,typeof t!="symbol"?t+"":t,e);import{u as k}from"./useCustomRouter-CiU2rkZM.js";import{T as G,L as Q}from"./index-Dm8pkpH6.js";import{_ as O,a as b,o as g,c as I,b as x,f as D,d as i,u as a,q as W,r as E,k as q,w as J,e as L,s as T,p as y,v as A,F as K,j as X,x as Z,y as $,z as F,t as N,n as P,A as ee,B as te}from"./index-BGi8GpGv.js";import{a as S}from"./index-CJtyaUy2.js";import{u as oe,G as re}from"./index-DQhdp3Mo.js";import{S as ae}from"./SearchIcon-C8b4b_FZ.js";import{P as ne}from"./index-CBHngC_A.js";import{c as le,D as se}from"./metaHelper-B8_iLp7n.js";import{u as ie,C as R,a as ue}from"./Content-CKsiGma2.js";import{u as B}from"./useDropdownOptions-Bht9kext.js";import"./useForm-D-1CqejB.js";const ce={class:"title-button-group"},de={__name:"Title",setup(s){const{addQuery:t}=k();return(e,o)=>{const n=b("Button");return g(),I(a(G),{title:"기기 관리"},{rightArea:x(()=>[D("div",ce,[i(n,{outlined:"",width:101,size:"x-small",color:"green",title:"액셀 기기 등록"}),i(n,{outlined:"",width:77,size:"x-small",title:"기기 등록",onClick:o[0]||(o[0]=p=>a(t)({view:"add"}))})])]),_:1})}}},pe=O(de,[["__scopeId","data-v-fb11b389"]]),me={class:"grid-header-wrapper"},_e={class:"left-area"},fe={class:"item-wrapper"},ve={class:"search-field"},ge={class:"item-wrapper"},he={class:"item-wrapper"},ye={__name:"Header",setup(s){const{getQuery:t,changeQuery:e}=k(),o=W([{title:"전체",value:"0"}]),n=E({}),p=(f,r)=>y({get:()=>n.value[f]||r,set:c=>n.value[f]=c&&c!=="ALL"?String(c).toUpperCase():void 0}),v=p("affiliate_id","0"),m=p("c_status","ALL"),_=p("u_status","ALL");q(async()=>{const f=await S("partner").getOptions();(f==null?void 0:f.result.httpStatus)===200&&o.push(...f.body),w()}),J(t,w);function w(){["affiliate_id","c_status","u_status","pageSize"].forEach(f=>{const r=t()[f];n.value[f]=r&&r!=="ALL"?r.toUpperCase():void 0})}return(f,r)=>{const c=b("Dropdown"),u=b("Input"),l=b("Radio"),d=b("RadioGroup"),h=b("Button");return g(),L("div",me,[D("div",_e,[D("div",fe,[r[4]||(r[4]=D("div",null,"제휴처",-1)),D("div",ve,[i(c,{modelValue:a(v),"onUpdate:modelValue":r[0]||(r[0]=C=>T(v)?v.value=C:null),items:o},null,8,["modelValue","items"]),i(u,{placeholder:"제휴처 명을 검색해 주세요."},{"prepend-icon":x(()=>[i(ae,{class:"mr-2"})]),_:1})])]),D("div",ge,[r[5]||(r[5]=D("div",null,"연결 상태",-1)),i(d,{modelValue:a(m),"onUpdate:modelValue":r[1]||(r[1]=C=>T(m)?m.value=C:null)},{default:x(()=>[i(l,{label:"전체",value:"ALL"}),i(l,{label:"양호",value:"HEALTHY"}),i(l,{label:"이상",value:"UNHEALTHY"})]),_:1},8,["modelValue"])]),D("div",he,[r[6]||(r[6]=D("div",null,"사용 여부",-1)),i(d,{modelValue:a(_),"onUpdate:modelValue":r[2]||(r[2]=C=>T(_)?_.value=C:null)},{default:x(()=>[i(l,{label:"전체",value:"ALL"}),i(l,{label:"ON",value:"ON"}),i(l,{label:"OFF",value:"OFF"})]),_:1},8,["modelValue"])])]),D("div",null,[i(h,{size:"tiny",title:"적용",onClick:r[3]||(r[3]=C=>a(e)(n.value))})])])}}},Ce=O(ye,[["__scopeId","data-v-0fd59983"]]),xe={class:"toolbar-wrapper"},De={class:"left-area"},we={class:"right-area"},Ie={__name:"Toolbar",setup(s){const{showAlert:t}=A("alert"),e={refresh:$(()=>F(()=>import("./RefreshIcon-BH4ZBiqo.js"),__vite__mapDeps([0,1,2,3]))),restart:$(()=>F(()=>import("./RestartIcon-BAW3uK_Q.js"),__vite__mapDeps([4,1,2,5]))),update:$(()=>F(()=>import("./UpdateIcon-Cmgn6-vx.js"),__vite__mapDeps([6,1,2,7]))),on:$(()=>F(()=>import("./OnIcon-c6Qgjds-.js"),__vite__mapDeps([8,1,2,9]))),off:$(()=>F(()=>import("./OffIcon-DI1FsZtX.js"),__vite__mapDeps([10,1,2,11]))),finish:$(()=>F(()=>import("./FinishIcon-DHl8Lyg0.js"),__vite__mapDeps([12,1,2,13])))},o=[{type:"refresh",title:"새로고침"},{type:"restart",title:"재시작"},{type:"update",title:"업데이트"},{type:"on",title:"사용 ON"},{type:"off",title:"사용 OFF"},{type:"finish",title:"종료"}];return(n,p)=>{const v=b("Button");return g(),L("div",xe,[D("div",De,[(g(),L(K,null,X(o,m=>i(v,{key:m.type,outlined:"",size:"x-small",color:"neutral",title:m.title,onClick:_=>a(t)(m.type)},{"prepend-icon":x(()=>[(g(),I(Z(e[m.type])))]),_:2},1032,["title","onClick"])),64))]),D("div",we,[i(v,{color:"green",size:"x-small",title:"다운로드"}),i(a(ne))])])}}},be=O(Ie,[["__scopeId","data-v-2173ee6f"]]),Ae={__name:"Alert",setup(s){const{alertObj:t}=A("alert"),e=y(()=>t.type),o=y(()=>e.value==="refresh"?"새로고침을 진행하시겠습니까?":e.value==="refresh_complete"?"DID 새로고침 완료":e.value==="restart"?"재시작을 진행하시겠습니까?":e.value==="restart_complete"?"DID 재시작 완료":e.value==="update"?"업데이트를 진행하시겠습니까?":e.value==="update_complete"?"DID 업데이트 완료":e.value==="on"?"기기 사용을 ON 하시겠습니까?":e.value==="on_complete"?"기기 사용 ON 완료":e.value==="off"?"기기 사용을 OFF 하시겠습니까?":e.value==="off_complete"?"기기 사용 OFF 완료":e.value==="finish"?"기기를 종료하시겠습니까?":e.value==="finish_complete"?"기기 종료 완료":""),n=y(()=>e.value==="refresh"?`새로고침을 할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="refresh_complete"?"DID 새로고침이 완료됐습니다.":e.value==="restart"?`재시작을 할 경우,
기기에 콘텐츠 노출이 멈추게 됩니다.`:e.value==="restart_complete"?`DID 재시작이 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="update"?`업데이트를 진행할 경우,
단시간 기기가 멈출 수 있습니다.`:e.value==="update_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="on"?`기기 사용을 ON 하게 되면,
기기가 활성화됩니다.`:e.value==="on_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="off"?`기기 사용을 OFF 하게 되면,
기기 화면이 대기 상태로 전환되게 됩니다.`:e.value==="off_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:e.value==="finish"?`기기 사용을 OFF 하게 되면,
기기가 꺼지게 됩니다.`:e.value==="finish_complete"?`DID 업데이트가 완료됐습니다.
기기 상태를 주의깊게 확인해주세요.`:""),p=y(()=>{var _;return!((_=e.value)!=null&&_.endsWith("_complete"))}),v=y(()=>{var _;return(_=e.value)==null?void 0:_.endsWith("_complete")});function m(){t.type=`${e.value}_complete`}return(_,w)=>{const f=b("Alert",!0);return g(),I(f,{modelValue:a(t).show,"onUpdate:modelValue":w[0]||(w[0]=r=>a(t).show=r),title:o.value,message:n.value,showCancel:p.value,confirmClickClose:v.value,"onClick:confirm":m},null,8,["modelValue","title","message","showCancel","confirmClickClose"])}}},ke={__name:"ConnectionStatus",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(s){const t=s,e=y(()=>t.item.connectionStatus==="HEALTHY"?"양호":"이상");return(o,n)=>(g(),L("div",{class:P(["connection-status",{healthy:s.item.connectionStatus==="HEALTHY"}])},N(e.value),3))}},Oe=O(ke,[["__scopeId","data-v-0f4d4a12"]]),$e={__name:"StorageSize",props:{item:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})}},setup(s){return(t,e)=>(g(),L("div",{class:P({unhealthy:s.item.connectionStatus==="UNHEALTHY"})},N(`${s.item.storageUsage||0}GB/${s.item.storageSize||0}GB`),3))}},Fe=O($e,[["__scopeId","data-v-93ede74e"]]),Le={checkbox:{column:{title:"checkbox",type:"checkbox"}},idx:{column:{title:"기기 NO",type:"link"}},deviceType:{column:{title:"기기 유형",type:"text"}},deviceCategoryIdx:{form:{row:4,component:"dropdown",required:!0,class:"w-318",label:"기기 유형",placeholder:"기기 유형을 선택해 주세요."}},deviceDetailType:{column:{title:"세부 유형",type:"text"}},partnerName:{column:{title:"제휴처",type:"text"}},partnerIdx:{form:{row:1,required:!0,autoFocus:!0,component:"dropdown",class:"w-318",label:"제휴처 선택",placeholder:"제휴처를 선택해 주세요.",errorMessages:{error:"",require:""}}},address:{form:{row:2,component:"address",group:"addressInfo",required:!0,label:"주소 (최신 사업자 등록증 주소)",placeholder:"예) 판교역로 166, 분당 주공, 백현동 532",errorMessages:{error:"",require:""}}},addressDetail:{form:{row:2,group:"addressInfo",required:!0,label:"상세 주소",placeholder:"상세 주소를 입력해 주세요.",errorMessages:{error:"",require:""}}},bcode:{form:{group:"addressInfo",required:!0,errorMessages:{error:"",require:""}}},x:{form:{group:"addressInfo",required:!0,errorMessages:{error:"",require:""}}},y:{form:{group:"addressInfo",required:!0,errorMessages:{error:"",require:""}}},location:{column:{title:"설치 위치",type:"text"},form:{row:3,component:"input",required:!0,class:"w-318",label:"기기 위치",placeholder:"기기 위치를 입력해 주세요.",errorMessages:{error:"",require:""}}},contentCount:{column:{title:"일반 콘텐츠",type:"text"}},adContentCount:{column:{title:"광고 콘텐츠",type:"text"}},connectionStatus:{column:{title:"연결 상태",type:"text"}},active:{column:{title:"사용 여부",type:"switch"}},storageSize:{column:{title:"HDD 용량",type:"text"}},storageUsage:{},updatedAt:{column:{title:"업데이트 일시",type:"date",format:"YYYY-MM-DD HH:mm:ss"}},deviceId:{form:{row:5,component:"input",required:!0,disabled:!0,class:"w-318",label:"기기 ID",placeholder:"기기 ID는 자동 생성됩니다."}}},Se=["checkbox","idx","deviceType","deviceDetailType","partnerName","location","contentCount","adContentCount","connectionStatus","active","storageSize","updatedAt"],Ve=["partnerIdx","address","addressDetail","bcode","x","y","location","deviceCategoryIdx","deviceId"],Te=le(Le,Se,Ve);class V extends se{constructor(t){super(t)}toRequestBody(){return this.constructor.metaData.form.reduce((t,{key:e})=>({...t,[e]:this[e]}),{})}}H(V,"metaData",Te);const Be={__name:"index",setup(s){const{page:t,size:e,totalPage:o,loading:n,items:p,selectedItems:v,addQuery:m}=oe(w),_=V.toColumnHeaders();async function w({affiliate_id:r,c_status:c,u_status:u}){var z;const l={page:t.value,size:e.value};r&&(l.partnerIdx=r),c&&(l.connectionStatus=c),u&&(l.active=u==="ON"),n.value=!0,p.value.length=0;const d=await S("device").getPage(l),{result:h,body:C}=d||{};(h==null?void 0:h.httpStatus)===200&&(n.value=!1,(z=C==null?void 0:C.data)==null||z.forEach(M=>p.value.push(new V(M))),o.value=(C==null?void 0:C.totalPage)||0)}async function f({item:r,column:c}){var l;if(p.value.findIndex(d=>d.idx===r.idx)!==-1){if(c.type==="switch"){const d=await S("device").partialUpdate(r.idx,{active:!r.active});((l=d==null?void 0:d.result)==null?void 0:l.httpStatus)===200&&(r.active=!r.active)}if(c.type==="link")return m({view:"detail",id:r.idx})}}return(r,c)=>(g(),I(a(re),{page:a(t),items:a(p),loading:a(n),totalPage:a(o),columnHeaders:a(_),modelValue:a(v),"onUpdate:modelValue":c[0]||(c[0]=u=>T(v)?v.value=u:null),"onClick:cell":f,"onClick:page":c[1]||(c[1]=u=>a(m)({page:u}))},{header:x(()=>[i(Ce)]),toolbar:x(()=>[i(be)]),alert:x(()=>[i(Ae)]),connectionStatus:x(({column:u,item:l})=>[i(Oe,{column:u,item:l},null,8,["column","item"])]),storageSize:x(({column:u,item:l})=>[i(Fe,{column:u,item:l},null,8,["column","item"])]),_:1},8,["page","items","loading","totalPage","columnHeaders","modelValue"]))}},Ee=O(Be,[["__scopeId","data-v-4ff5aad1"]]),qe={__name:"index",setup(s){return(t,e)=>(g(),I(a(Q),null,{title:x(()=>[i(pe)]),content:x(()=>[i(a(Ee))]),_:1}))}};function U(){const s=V.toFormFields(),{values:t,errors:e,getFields:o,validateFields:n}=ie(s);return{fields:o(["deviceId"]),values:t,errors:e,getFields:o,validateFields:()=>n(["deviceId"])}}const ze={__name:"Create",setup(s){const{showAlert:t}=A("alert"),{routeList:e}=k(),{fields:o,values:n,errors:p,validateFields:v}=U(),{options:m,fetchOptions:_}=B(),{options:w,fetchOptions:f}=B(),r=y(()=>({partnerIdx:m.value,deviceCategoryIdx:w.value.map(u=>({...u,title:`${u.title1} / ${u.title2}`})),deviceDetailCategoryIdx:[{value:1,title:"기기 세부 유형A"},{value:2,title:"기기 세부 유형B"},{value:3,title:"기기 세부 유형C"},{value:4,title:"기기 세부 유형D"}]}));q(()=>{_("partner"),f("device/category")});const c=A("methods");return c.cancel=()=>ee(n)?t("cancel"):e(),c.submit=()=>{if(!v())return t("missing");t("regist",async()=>{var d;const u=new V({...n,...n.addressInfo}),l=await S("device").create(u.toRequestBody());t(((d=l==null?void 0:l.result)==null?void 0:d.httpStatus)===200?"regist_complete":"missing")})},(u,l)=>(g(),I(R,{fields:a(o),values:a(n),errors:a(p),items:r.value},null,8,["fields","values","errors","items"]))}},He={__name:"Detail",setup(s){const{showAlert:t}=A("alert"),{getQuery:e,routeList:o}=k(),{fields:n,values:p,errors:v}=U(),{options:m}=B(),{options:_}=B(),w=y(()=>n.map(l=>l.map(d=>({...d,disabled:!0})))),f=y(()=>({partnerIdx:m.value,deviceCategoryIdx:_.value,deviceDetailCategoryIdx:[{value:1,title:"기기 세부 유형A"},{value:2,title:"기기 세부 유형B"},{value:3,title:"기기 세부 유형C"},{value:4,title:"기기 세부 유형D"}]})),r=E(!1),c=E(null);q(async()=>{var C;r.value=!0;const l=await S("device").getDetail((C=e())==null?void 0:C.id),{result:d,body:h}=l||{};d.httpStatus===200&&(te(p,{...h,partnerIdx:h.partnerName,deviceCategoryIdx:h.deviceDetailType}),c.value=h.createdAt,m.value.push({title:h.partnerName,value:h.partnerName}),_.value.push({title:`${h.deviceType} / ${h.deviceDetailType}`,value:h.deviceDetailType}),r.value=!1)});const u=A("methods");return u.cancel=o,u.submit=()=>{t("delete",async()=>{var d,h;const l=await S("device").delete((d=e())==null?void 0:d.id);((h=l==null?void 0:l.result)==null?void 0:h.httpStatus)===200&&t("delete_complete")})},(l,d)=>(g(),I(R,{isDetail:"",fields:w.value,values:a(p),errors:a(v),items:f.value,createdAt:c.value},null,8,["fields","values","errors","items","createdAt"]))}},Ne={class:"flex justify-between align-center"},Pe={class:"button-group"},Re={__name:"Footer",props:{isDetail:{type:Boolean,default:!1}},setup(s){const t=A("methods");return(e,o)=>{const n=b("Button");return g(),L("div",Ne,[o[0]||(o[0]=D("div",null,null,-1)),D("div",Pe,[i(n,{outlined:"",width:55,size:"medium",color:"neutral",title:s.isDetail?"목록":"취소",onClick:a(t).cancel},null,8,["title","onClick"]),i(n,{size:"medium",width:55,color:s.isDetail?"red":"primary",title:s.isDetail?"삭제":"등록",onClick:a(t).submit},null,8,["color","title","onClick"])])])}}},Ue=O(Re,[["__scopeId","data-v-71c96e95"]]),Me={__name:"Alert",setup(s){const{alertObj:t}=A("alert"),{routeList:e}=k(),o=y(()=>t.type),n=y(()=>o.value==="regist"?"기기를 등록하시겠습니까?":o.value==="regist_complete"?"기기 등록 완료":o.value==="cancel"?"기기 등록을 취소하시겠습니까?":o.value==="missing"?"잘못된 정보 또는 누락된 정보가 있습니다.":o.value==="delete"?"기기 정보를 삭제하시겠습니까?":o.value==="delete_complete"?"기기 정보 삭제 완료":""),p=y(()=>o.value==="regist_complete"?"기기 등록이 완료됐습니다.":o.value==="cancel"?`기기 등록을 취소할 경우,
입력한 정보가 삭제됩니다.`:o.value==="missing"?"입력한 정보를 다시 한번 확인해주세요.":o.value==="delete"?`기기 정보가 삭제되면,
기존 데이터가 전체 삭제 됩니다.`:o.value==="delete_complete"?"기기 정보 삭제 완료됐습니다.":""),v=y(()=>o.value==="missing"),m=y(()=>["regist","cancel","delete"].includes(o.value)),_=y(()=>o.value!=="regist"),w=y(()=>({cancel:e,regist:t["click:confirm"],regist_complete:e,delete:t["click:confirm"],delete_complete:e}));return(f,r)=>{const c=b("Alert",!0);return g(),I(c,{modelValue:a(t).show,"onUpdate:modelValue":r[0]||(r[0]=u=>a(t).show=u),title:n.value,error:v.value,message:p.value,showCancel:m.value,confirmClickClose:_.value,"onClick:confirm":w.value[o.value]},null,8,["modelValue","title","error","message","showCancel","confirmClickClose","onClick:confirm"])}}},je={__name:"index",setup(s){const{isDetail:t}=k();return(e,o)=>(g(),I(a(ue),{title:a(t)?"기기 상세 정보":"기기 등록"},{content:x(()=>[a(t)?(g(),I(He,{key:0})):(g(),I(ze,{key:1}))]),footer:x(()=>[i(Ue,{isDetail:a(t)},null,8,["isDetail"])]),alert:x(()=>[i(Me)]),_:1},8,["title"]))}},at={__name:"index",setup(s){const{getQuery:t}=k();return(e,o)=>{var n;return["add","detail"].includes((n=a(t)())==null?void 0:n.view)?(g(),I(a(je),{key:0})):(g(),I(a(qe),{key:1}))}}};export{at as default};
